{% extends "layouts.master" %}
{% block content %}
{#     <pre dir="ltr">#}
{#     {{ dd(_context) }}#}
    <main id="main">
        <div class="relative  profile-header bg-gradient-to-r from-primary to-theme-blue lg:h-48 overflow-hidden">
            <div class="container relative z-10 flex justify-between h-full items-center">
                <div class="self-start">
                    <nav class="w-full py-5">
                        <ol class="list-reset flex items-center text-sm text-reverse ">
                            <li><a href="{{ link('/') }}" class="fix-align text-primary text-reverse">{{trans('common.titles.home')}}</a></li>
                            <li><i class="sicon-keyboard_arrow_left mx-2"></i></li>
                            {% if isPendingOrders %}
                                <li>
                                    <a href="{{ link('orders') }}" class="fix-align text-primary text-reverse">{{ trans('common.titles.orders') }}</a>
                                </li>
                                <li><i class="sicon-keyboard_arrow_left mx-2"></i></li>
                                <li>
                                    <span class="fix-align">{{ trans('common.titles.pending_orders') }}</span>
                                </li>
                            {% else %}
                                <li>
                                    <span class="fix-align">{{ trans('common.titles.orders') }}</span>
                                </li>
                            {% endif %}

                        </ol>
                    </nav>
                </div>
            </div>
        </div>
        <div class="container mb-24">
            <div class="flex items-start flex-col lg:flex-row ">
                {% include 'pages.customer.partials.sidebar' %}
                <div class="main-content w-full flex-1 pt-6 md:pt-10 ">
                    <h1 class="font-bold text-lg md:mb-5">{{ isPendingOrders ? trans('common.titles.pending_orders') : trans('common.titles.orders') }}</h1>
                    <div class=" overflow-hidden">
                        {% if orders.items is not empty %}
                            <table class="min-w-full border-separate" style="border-spacing: 0 20px;">
                                <thead class="bg-gray-50 mb-5 hidden md:table-header-group">
                                    <tr>
                                        <th scope="col" class="px-6 text-start text-sm font-medium uppercase tracking-wider">
                                            {{trans('pages.thank_you.order_id')}}
                                        </th>
                                        <th scope="col" class="px-6 text-start text-sm font-medium uppercase tracking-wider">
                                            {{trans('pages.orders.total')}}
                                        </th>
                                        <th scope="col" class="px-6 text-start text-sm font-medium uppercase tracking-wider">
                                            {{trans('pages.orders.date')}}
                                        </th>
                                        <th scope="col" class="px-6 text-start text-sm font-medium  uppercase tracking-wider">
                                            {{trans('pages.orders.status')}}
                                        </th>
                                        <th scope="col" class="px-6 relative">
                                            <span class="sr-only">--</span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody class="orders-container">
                                {% for order in orders.items %}
                                    <tr class="order-row border-b-8 border-t-8 border-light-gray bg-white overflow-hidden flex md:table-row flex-row md:flex-row flex-wrap md:flex-no-wrap">
                                        <td class="w-full md:w-auto md:rounded-s-md px-6 py-6 md:py-6 md:h-20 whitespace-nowrap text-sm font-bold">
                                            <a href="{{ order.url }}">#{{ order.id }}</a>
                                        </td>
                                        <td class="w-full md:w-auto px-6 py-2 md:py-6 md:h-20 whitespace-nowrap text-sm ">
                                            {{ order.total_price }}
                                        </td>
                                        <td class="w-full md:w-auto px-6 py-2 md:py-6 md:h-20 whitespace-nowrap text-sm ">
                                            {# TODO: parse the date based on the static design #}
                                            {{ order.created_at }}
                                        </td>
                                        <td class="w-full md:w-auto  px-6 py-2 md:py-6 md:h-20 whitespace-nowrap text-sm ">
                                            <span class="text-primary bg-primary-light px-4 pt-0.5 pb-1.5 inline-block rounded-2xl" style="color: {{ order.status.color }}">
                                                {#{{ order.status.icon }} TODO: HOW TO AD THE ICON?#}
                                                {{ order.status.name }}
                                            </span>
                                        </td>
                                        <td class="w-full md:w-auto md:rounded-e-md px-6 py-2 md:py-6 md:h-20 whitespace-nowrap text-lg font-medium md:text-end">
                                            <span class="md:hidden w-32 inline-block font-normal text-sm"></span>
                                            {#<a href="#" class="text-red-500 hover:text-red-600 mx-2">
                                                <i class="sicon-trash-2"></i>
                                            </a>#}
                                            <a href="{{ order.url }}" class="text-gray-text hover:text-gray-500 mx-2">
                                                <i class="sicon-eye"></i>
                                            </a>
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>

                            {% include 'pages.partials.loader-status' with {'nextPageUrl':orders.nextPageUrl} %}
                        {% else %}
                            <div class="placeholder-block placeholder-block--no-category">
                                <i class="sicon-inbox"></i>
                                <p>
                                    <span>{{trans('pages.orders.non_orders')}}</span>
                                </p>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </main>
{% endblock %}

{% block scripts %}
    <script>
        document.addEventListener( 'DOMContentLoaded', function () {
            salla.infiniteScroll.initiate('.orders-container', '.order-row', {
                history        : false,
                scrollThreshold: false
            })
        });
    </script>
{% endblock %}