{#
| Variable              | Type               | Description | @see |
|-----------------------|--------------------|-------------|------|
| orders                | Order[] *Paginator |             | TODO |
| orders.next_page      | ?String            |             |      |
| orders.count          | Integer            |             |      |
| orders[].id           | Integer            |             |      |
| orders[].rating_url   | String             |             |      |
| orders[].has_feedback | Bool               |             |      |
#}
{% extends "layouts.master" %}

{% block content %}
    <main id="main">
        <div class="relative  profile-header bg-gradient-to-r from-primary to-theme-blue lg:h-48 overflow-hidden">
            <div class="container relative z-10 flex justify-between h-full items-center">
                <div class="self-start">
                    {% component breadcrumbs with {is_dark:true} %}
                </div>
            </div>
        </div>
        <div class="container mb-24">
            <div class="flex items-start flex-col lg:flex-row ">
                {% include 'pages.partials.customer.sidebar' %}
                <div class="main-content w-full flex-1 pt-6 md:pt-10 ">
                    <h1 class="font-bold text-lg md:mb-5">{{ trans('common.titles.rating') }}</h1>
                    <div class="overflow-hidden">
                        {% if orders.count %}
                            <table class="min-w-full border-separate" style="border-spacing: 0 20px;">
                                <tbody class="rating-container">
                                {% for order in orders %}
                                    <tr class="rating-item border-b-8 border-t-8 border-light-gray bg-white overflow-hidden flex md:table-row flex-row md:flex-row flex-wrap md:flex-no-wrap">
                                        <td class="w-full md:w-auto md:rounded-s-md px-6 py-6 md:py-6 md:h-20 whitespace-nowrap text-sm font-bold">
                                            <a href="{{ order.rating_url }}">
                                                <p>{{ trans('pages.rating.order_id') }} #{{ order.order_id }}</p>
                                            </a>
                                        </td>
                                        <td>
                                            <a href="{{ order.rating_url }}">
                                                {% if order.has_feedback %}
                                                    <small class="btn btn--oval btn--padded less btn--yellow font-xsm">
                                                        <i class="sicon-star2 ml-1"></i>
                                                        {{ trans('pages.rating.rated') }}
                                                    </small>
                                                {% else %}
                                                    <small class="btn btn--oval btn--padded less btn--grey font-xsm">
                                                        <i class="sicon-star ml-1"></i>
                                                        {{ trans('pages.rating.rate') }}
                                                    </small>
                                                {% endif %}
                                            </a>
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                            {% include 'pages.partials.loader-status' with {next_page:orders.next_page} %}
                        {% else %}
                            <div class="placeholder-block placeholder-block--no-category flex flex-col justify-center items-center pt-16 px-8">
                              <i class="sicon-inbox block text-5xl text-gray-300 mb-2"></i>
                              <p class="text-base text-gray-500">
                                  <span>{{ trans('pages.rating.no_ratings') }}</span>
                              </p>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </main>
{% endblock %}

{% block scripts %}
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            salla.infiniteScroll.initiate('.rating-container', '.rating-item', {
                history        : false,
                scrollThreshold: false
            })
        });
    </script>
{% endblock %}