"use strict";(self.webpackChunkTheme_One=self.webpackChunkTheme_One||[]).push([[518],{8518:(l,t,e)=>{e.r(t),e.d(t,{salla_product_availability:()=>s});var a=e(7502);const s=class{constructor(l){(0,a.r)(this,l),this.hasButton=!0,this.countryCode="SA",this.subscribe=salla.lang.get("common.elements.submit"),this.cancel=salla.lang.get("common.elements.cancel"),this.subTitle=salla.lang.get("pages.products.notify_availability_subtitle"),this.mobileLabel=salla.lang.get("common.elements.mobile"),this.emailLabel=salla.lang.get("common.elements.email"),this.mobilePlaceholder=salla.lang.get("common.elements.mobile_placeholder"),this.emailPlaceholder=salla.lang.get("common.elements.email_placeholder"),this.productId=salla.config.page.id,this.channelsWatcher(this.channels),this.title_=this.host.title||salla.lang.get("pages.products.notify_availability_title"),this.host.removeAttribute("title")}channelsWatcher(l){this.channels_=l.split(",")}async submit(){this.btn.load().then(this.btn.disable).then((()=>salla.api.product.availabilitySubscribe({id:this.productId,mobile:this.mobile.value,email:this.email.value,country_code:this.countryCode}))).then((()=>salla.success(salla.lang.get("pages.products.notify_availability_success")))).then(this.btn.stop).then(this.modal.hide).then((()=>this.host.remove()))}render(){return(0,a.h)(a.e,null,this.hasButton?(0,a.h)("salla-button",{onClick:()=>this.modal.show()},(0,a.h)("slot",null,salla.lang.get("pages.products.notify_availability"))):(0,a.h)("slot",null),(0,a.h)("salla-modal",{ref:l=>this.modal=l,id:"product-availability-modal",title:this.title_,subTitle:this.subTitle,icon:"sicon-bell-ring",modalWidth:"w-full"},(0,a.h)("div",{class:"s-product-availability-body"},this.channels_.includes("email")?[(0,a.h)("label",{class:"s-product-availability-label"},this.emailLabel),(0,a.h)("input",{class:"s-product-availability-input",placeholder:this.emailPlaceholder,ref:l=>this.email=l,type:"email"})]:"",this.channels_.includes("sms")?[(0,a.h)("label",{class:"s-product-availability-label"},this.mobileLabel),(0,a.h)("input",{class:"s-product-availability-input",placeholder:this.mobilePlaceholder,ref:l=>this.mobile=l,type:"text"}),(0,a.h)("input",{type:"hidden",value:this.countryCode})]:""),(0,a.h)("div",{slot:"footer",class:"common-anime flex justify-between space-s-4"},(0,a.h)("salla-button",{ref:l=>this.btn=l,class:"w-full",onClick:()=>this.submit()},this.subscribe),(0,a.h)("salla-button",{class:"w-full",color:"outline"},this.cancel))))}get host(){return(0,a.g)(this)}static get watchers(){return{channels:["channelsWatcher"]}}}}}]);