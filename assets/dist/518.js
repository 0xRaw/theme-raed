(self.webpackChunkTheme_One=self.webpackChunkTheme_One||[]).push([[518],{7518:(e,n,t)=>{"use strict";t.r(n),t.d(n,{salla_branches:()=>f});var r=t(8957),i=t(9794),a=t(9770),s=t(9593),o=t.n(s),c=t(8297),u=t(7512),l=t(1052),h=u.createStore(l),f=function(){function e(n){var t=this;(0,i.Z)(this,e),(0,c.r)(this,n),this.open=!1,this.isOpenedBefore=h.get("branch-choosed-before"),this.displayAs="default",this.browseProductsFrom="all",this.branches=[{id:1,name:"فرع الرياض",open:!0,available:!0,limited:!1,tag:"متوفر"},{id:2,name:"فرع جدة",open:!1,available:!1,limited:!1,tag:"غير متوفر"},{id:3,name:"فرع مكة",open:!0,available:!0,limited:!1,tag:"متوفر"},{id:4,name:"فرع المدينة",open:!0,available:!0,limited:!1,tag:"متوفر"},{id:5,name:"فرع جازان",open:!0,available:!0,limited:!0,tag:"الكمية محدودة"}],this.current=1,this.currentBranch=function(e){return t.branches.filter((function(e){return e.id==t.current}))[0][e]},this.statusColor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?e.limited?"s-branches-color-red":e.available?"s-branches-color-green":"s-branches-color-gray":t.currentBranch("limited")?"s-branches-color-red":t.currentBranch("available")?"s-branches-color-green":"s-branches-color-gray"},this.isChoiceable=function(){return"all"!==t.browseProductsFrom&&"single"==t.position||"header"==t.position},this.formTitle=function(){return t.isChoiceable()?"توفر المنتج في الفروع الآخرى":"التسوق من فرع آخر"},salla.event.on("branches::show",(function(){return t.show()}))}var n,t;return(0,a.Z)(e,[{key:"show",value:(t=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modal.show());case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"hide",value:(n=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modal.hide());case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"handelChange",value:function(e){this.selected=e.target.value}},{key:"handleSubmit",value:function(){var e=this;this.btn.load().then((function(){setTimeout((function(){return location.reload()}),2e3)})),h.set("branch-choosed-before",!0),this.show(),setTimeout((function(){e.current=e.selected}),300)}},{key:"render",value:function(){var e=this;return(0,c.h)("salla-modal",{icon:"sicon-store-alt",title:"فرع الرياض","sub-title":"أنت الآن تتصفح المتجر من","sub-title-first":!0,"is-closable":this.isOpenedBefore||"popup"!=this.displayAs?"true":"false",ref:function(n){return e.modal=n},"modal-width":"sm",id:"s-branches-modal",class:"hidden"},(0,c.h)("h4",{class:"s-branches-title"},this.formTitle()),this.branches.length<=5?(0,c.h)("div",{class:"s-branches-space-v"},this.branches.map((function(n){return(0,c.h)("div",{class:"s-branches-input-wrap"},(0,c.h)("input",{id:e.position+"_branch_"+n.id,disabled:!n.open&&e.isChoiceable(),name:"lang",type:"radio",value:n.id,onChange:function(n){return e.handelChange(n)},class:{"s-branches-input":!0,"opacity-50":!n.open,hidden:!e.isChoiceable()},checked:e.current==n.id}),(0,c.h)("label",{htmlFor:e.position+"_branch_"+n.id,class:{"s-branches-label":!0,"s-branches-clickable":e.isChoiceable()}},(0,c.h)("span",{class:{"s-branches-is-closed":!n.open}},n.name),e.isChoiceable()?(0,c.h)("small",{class:"s-branches-closed-badge"},n.open?"":"مُغلق"):(0,c.h)("span",{class:e.statusColor(n)},n.tag)))}))):(0,c.h)("select",{class:"s-branches-select",onInput:function(n){return e.handelChange(n)}},this.branches.map((function(n){return(0,c.h)("option",{value:n.id,disabled:!n.open,selected:e.selected==n.id},n.name," ",n.open?"":"- مُغلق")}))),this.isChoiceable()?(0,c.h)("slot",{name:"footer"},(0,c.h)("salla-button",{ref:function(n){return e.btn=n},onClick:function(){return e.handleSubmit()},class:"s-branches-submit",wide:!0},salla.lang.get("common.elements.ok"))):"")}},{key:"componentDidRender",value:function(){this.isOpenedBefore||"popup"!=this.displayAs||this.show()}},{key:"host",get:function(){return(0,c.g)(this)}}]),e}();f.style=":host{display:block}"},7512:(e,n,t)=>{var r=t(5994),i=r.slice,a=r.pluck,s=r.each,o=r.bind,c=r.create,u=r.isList,l=r.isFunction,h=r.isObject;e.exports={createStore:d};var f={version:"2.0.12",enabled:!1,get:function(e,n){var t=this.storage.read(this._namespacePrefix+e);return this._deserialize(t,n)},set:function(e,n){return void 0===n?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(n)),n)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(e){var n=this;this.storage.each((function(t,r){e.call(n,n._deserialize(t),(r||"").replace(n._namespaceRegexp,""))}))},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return d.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return d(this.storage,this.plugins,e)}};function d(e,n,t){t||(t=""),e&&!u(e)&&(e=[e]),n&&!u(n)&&(n=[n]);var r=t?"__storejs_"+t+"_":"",d=t?new RegExp("^"+r):null;if(!/^[a-zA-Z0-9_\-]*$/.test(t))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var p={_namespacePrefix:r,_namespaceRegexp:d,_testStorage:function(e){try{var n="__storejs__test__";e.write(n,n);var t=e.read(n)===n;return e.remove(n),t}catch(e){return!1}},_assignPluginFnProp:function(e,n){var t=this[n];this[n]=function(){var n=i(arguments,0),r=this;function a(){if(t)return s(arguments,(function(e,t){n[t]=e})),t.apply(r,n)}var o=[a].concat(n);return e.apply(r,o)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(e,n){if(!e)return n;var t="";try{t=JSON.parse(e)}catch(n){t=e}return void 0!==t?t:n},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(e){var n=this;if(u(e))s(e,(function(e){n._addPlugin(e)}));else if(!a(this.plugins,(function(n){return e===n}))){if(this.plugins.push(e),!l(e))throw new Error("Plugins must be function values that return objects");var t=e.call(this);if(!h(t))throw new Error("Plugins must return an object of function properties");s(t,(function(t,r){if(!l(t))throw new Error("Bad plugin property: "+r+" from plugin "+e.name+". Plugins should only return functions.");n._assignPluginFnProp(t,r)}))}},addStorage:function(e){!function(){var e="undefined"==typeof console?null:console;e&&(e.warn?e.warn:e.log).apply(e,arguments)}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},b=c(p,f,{plugins:[]});return b.raw={},s(b,(function(e,n){l(e)&&(b.raw[n]=o(b,e))})),s(e,(function(e){b._addStorage(e)})),s(n,(function(e){b._addPlugin(e)})),b}},5994:(e,n,t)=>{var r=Object.assign?Object.assign:function(e,n,t,r){for(var i=1;i<arguments.length;i++)c(Object(arguments[i]),(function(n,t){e[t]=n}));return e},i=function(){if(Object.create)return function(e,n,t,i){var a=o(arguments,1);return r.apply(this,[Object.create(e)].concat(a))};{function e(){}return function(n,t,i,a){var s=o(arguments,1);return e.prototype=n,r.apply(this,[new e].concat(s))}}}(),a=String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},s="undefined"!=typeof window?window:t.g;function o(e,n){return Array.prototype.slice.call(e,n||0)}function c(e,n){u(e,(function(e,t){return n(e,t),!1}))}function u(e,n){if(l(e)){for(var t=0;t<e.length;t++)if(n(e[t],t))return e[t]}else for(var r in e)if(e.hasOwnProperty(r)&&n(e[r],r))return e[r]}function l(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}e.exports={assign:r,create:i,trim:a,bind:function(e,n){return function(){return n.apply(e,Array.prototype.slice.call(arguments,0))}},slice:o,each:c,map:function(e,n){var t=l(e)?[]:{};return u(e,(function(e,r){return t[r]=n(e,r),!1})),t},pluck:u,isList:l,isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},isObject:function(e){return e&&"[object Object]"==={}.toString.call(e)},Global:s}},1052:(e,n,t)=>{var r=t(5994).Global;function i(){return r.sessionStorage}function a(e){return i().getItem(e)}e.exports={name:"sessionStorage",read:a,write:function(e,n){return i().setItem(e,n)},each:function(e){for(var n=i().length-1;n>=0;n--){var t=i().key(n);e(a(t),t)}},remove:function(e){return i().removeItem(e)},clearAll:function(){return i().clear()}}}}]);