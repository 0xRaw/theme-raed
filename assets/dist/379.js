"use strict";(self.webpackChunkTheme_One=self.webpackChunkTheme_One||[]).push([[379],{2464:(e,t,s)=>{s.d(t,{H:()=>a});class r extends salla.AppHelpers{setHost(e){this.host=e}getElement(e){return this.host.querySelector(e)}getAttribute(e,t){var s;return null===(s=this.getElement(e))||void 0===s?void 0:s.getAttribute(t)}val(e){return this.getAttribute(e,"value")}isUser(){return"user"===salla.config.get("user.type")}}const a=new r},8379:(e,t,s)=>{s.r(t),s.d(t,{salla_offer:()=>l});var r=s(1208),a=s(2464);const l=class{constructor(e){var t,s,l;(0,r.r)(this,e),this.offer=null,a.H.setHost(this.host),this.headerSlot=(null===(t=a.H.getElement('[slot="header"]'))||void 0===t?void 0:t.innerHTML)||'<b class="s-offer-title">{name}</b><h3 class="s-offer-subtitle">{message}</h3>',this.categorySlot=(null===(s=a.H.getElement('[slot="category"]'))||void 0===s?void 0:s.innerHTML)||'<i class="s-offer-badge-icon sicon-tag"></i><span class="s-offer-badge-text">{name}</span>',this.productSlot=(null===(l=a.H.getElement('[slot="product"]'))||void 0===l?void 0:l.innerHTML)||this.defaultProductSlot(),salla.offer.event.onExisted((e=>{salla.localStore.get("remember-offer-"+e.offer.offer_id)?salla.log("User selected to don't show this offer again."):this.show(e.product_id)}))}async show(e){return this.modal.show().then((()=>salla.api.offer.details(e))).then((e=>this.offer=e.data[0]))}rememberMe(e){salla.localStore.set("remember-offer-"+this.offer.id,e.target.checked)}addItem(){return this.load(),salla.cart.api.quickAdd(this.dataset.id).finally((()=>this.stop()))}defaultProductSlot(){return'<a href={url} class="s-offer-product-image"><img class="s-offer-product-img" src="{image}" /></a><div class="s-offer-product-info">   <a href={url} class="s-offer-product-name">{name}</a>   <div class="s-offer-product-price">{price}</div></div>'}render(){var e,t;return(0,r.h)("salla-modal",{ref:e=>this.modal=e,"is-loading":null===this.offer},null!==this.offer?[(0,r.h)("div",{class:"s-offer-header",innerHTML:this.headerSlot.replace(/\{name\}/g,this.offer.name).replace(/\{message\}/g,this.offer.message)}),(0,r.h)("div",{class:"s-offer-body"},(null===(e=this.offer.get.categories)||void 0===e?void 0:e.length)>0?this.offer.get.categories.map((e=>(0,r.h)("a",{href:e.urls.customer,class:"s-offer-badge",innerHTML:this.categorySlot.replace(/\{name\}/g,e.name).replace(/\{url\}/g,e.urls.customer)}))):null===(t=this.offer.get.products)||void 0===t?void 0:t.map((e=>(0,r.h)("div",{class:"s-offer-product",id:"product_"+e.id,innerHTML:this.productSlot.replace(/\{name\}/g,e.name).replace(/\{url\}/g,e.url).replace(/\{image\}/g,e.thumbnail).replace(/\{price\}/g,e.has_special_price?salla.money(e.sale_price)+'<span class="s-offer-product-old-price">'+salla.money(e.regular_price)+"</span>":salla.money(e.price))},(0,r.h)("salla-button",{"btn-style":"outline-primary","data-id":e.id,onClick:this.addItem},salla.lang.get("pages.cart.add_to_cart")))))),(0,r.h)("div",{class:"s-offer-footer",slot:"footer"},this.offer.expiry_date?(0,r.h)("p",{class:"s-offer-expiry"},salla.lang.get("pages.products.offer_expires_in")," ",this.offer.expiry_date):"",(0,r.h)("label",{class:"s-offer-remember-label"},(0,r.h)("input",{type:"checkbox",onChange:e=>this.rememberMe(e),class:"s-offer-remember-input"}),"Â  ",salla.lang.get("common.remember_my_choice")))]:"")}componentDidRender(){this.modal.querySelectorAll("[hidden]").forEach((e=>e.removeAttribute("hidden")))}get host(){return(0,r.g)(this)}}}}]);