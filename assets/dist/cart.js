(()=>{function t(t){anime({targets:t,opacity:[0,1],duration:2e3,translateX:[-20,0],delay:(t,o)=>100*o})}document.addEventListener("DOMContentLoaded",(()=>{cartItemsCount||salla.cart.event.clearCartSummary(),t(".free-shipping"),t(".shipping-item")})),window.hasApplePay=function(){return{has_apple_pay:!!window.ApplePaySession}},window.initCart=function(t,o){return{cart_id:t,couponCode:o,isShowCouponDiscount:!!o,isShowCouponError:!1,couponErrorMessage:"",addCoupon:function(){this.isShowCouponError=!1,this.couponCode?(salla.coupon.api.add({id:this.cart_id,coupon:this.couponCode}).then((t=>{this.updateCartSummary()})).catch((t=>{this.isShowCouponError=!0,t&&(salla.log(t.message||t),this.couponErrorMessage=t.message)})),this.isShowCouponDiscount=!this.isShowCouponDiscount,this.isShowCouponDiscount||(this.couponCode="")):(this.isShowCouponError=!0,this.couponErrorMessage="يجب إدخال كوبون صالح")},removeCoupon:function(){this.couponCode&&(this.isShowCouponError=!1,salla.coupon.api.remove(this.cart_id).then((t=>{this.couponCode="",this.updateCartSummary()})).catch((t=>{this.isShowCouponError=!0,this.couponErrorMessage=t.message})))},updateCartSummary:function(){salla.cart.api.fetchSummary().then((t=>{console.log(t)}))}}},window.initCartItem=function(t,o,i){return{itemId:t,itemQty:o,isRemoveItem:!1,itemTotal:i,qtyValidation:"",addQty:function(){this.itemQty++,this.updateQty()},subQty:function(){this.itemQty<=1||(this.itemQty--,this.updateQty())},updateQty:function(){salla.cart.api.updateItem({id:this.itemId,quantity:this.itemQty}).then((t=>{this.updateCartPageInfo(t)})).catch((t=>this.validateQty(t)))},updateCartPageInfo:function(t){this.qtyValidation=null;let o=t.data.items?.find((t=>t.id==this.itemId));this.itemTotal=o?.total;let i=t.sections["free-shipping-bar"],e=document.querySelector("#free-shipping-bar");i&&e&&(e.outerHTML=i)},validateQty(t){this.qtyValidation=t.response.data.error.fields.quantity[0]},removeItem:function(){this.isRemoveItem=!0,salla.cart.api.deleteItem(this.itemId).then((o=>{this.updateCartPageInfo(o);let i=document.querySelector("#item-"+t);anime({targets:i,height:"0",margin:0,easing:"easeInOutQuad",duration:300,opacity:0,"padding-bottom":0,"padding-top":0,complete:()=>i.remove()})}))}}}})();