"use strict";(self.webpackChunkTheme_One=self.webpackChunkTheme_One||[]).push([[109],{2618:(s,e,t)=>{t.r(e),t.d(e,{salla_modal:()=>o,salla_search:()=>l});var i=t(5570),a=t(3863);const l=class{constructor(s){var e;(0,i.r)(this,s),this.inputValue="",this.inline=!1,this.oval=!1,this.height=60,a.H.setHost(this.host),this.productSlot=(null===(e=a.H.getElement('[slot="product"]'))||void 0===e?void 0:e.innerHTML)||this.getDefaultProductSlot(),salla.event.on("search::show",(()=>this.modal.show())),salla.event.on("languages::translations.loaded",(()=>{this.placeholder=salla.lang.get("blocks.header.search_placeholder"),this.noResultsText=salla.lang.get("common.elements.no_options")}))}onModalOpen(){this.modal.querySelector(".s-search-input").focus()}onModalClose(){this.modal.querySelector(".s-search-input").value="",this.results=void 0,this.afterSearching(),this.container.classList.remove("s-search-no-results")}getDefaultProductSlot(){return'<div class="s-search-product-image-container">  <img class="s-search-product-image" src="{image}" alt="{name}"/></div><div class="s-search-product-details">  <div class="s-search-product-title">{name}</div> <div class="s-search-product-price">{price}</div></div>'}search(s){if(this.inputValue=s.target.value,a.H.hideElement(this.noResults),0===s.target.value.length)return this.results=void 0,void this.afterSearching();s.target.value.length<=2||(a.H.toggleElement(this.searchIcon,"s-search-spinner-loader","sicon-search",(()=>!0)),salla.search.api.search(s.target.value).then((s=>this.results=s)).catch((s=>"Query Same As Previous!"!==s?this.results=void 0:null)).finally((()=>this.afterSearching(!1))))}afterSearching(s=!0){var e;this.noResults.style.display=s||(null===(e=this.results)||void 0===e?void 0:e.data.length)>0?"none":"block",a.H.toggleElement(this.container,"s-search-container-open","s-search-no-results",(()=>{var s;return null===(s=this.results)||void 0===s?void 0:s.data.length})).toggleElement(this.searchIcon,"s-search-spinner-loader","sicon-search",(()=>!1)),salla.search.api.previousQuery="",0==this.inputValue.length&&this.container.classList.remove("s-search-no-results")}render(){var s;const e=(0,i.h)("div",{class:{"s-search-container":!0,"s-search-inline":this.inline},ref:s=>this.container=s,style:this.oval?{borderRadius:this.height/2+"px"}:{}},(0,i.h)("input",{class:"s-search-input",type:"text",placeholder:this.placeholder,onInput:s=>this.search(s),style:{height:this.height+"px"}}),(0,i.h)("span",{class:"s-search-icon-wrap"},(0,i.h)("i",{class:"s-search-icon sicon-search",ref:s=>this.searchIcon=s})),(0,i.h)("div",{class:"s-search-results"},null===(s=this.results)||void 0===s?void 0:s.data.map((s=>(0,i.h)("a",{href:s.url,class:"s-search-product",innerHTML:this.productSlot.replace(/\{name\}/g,s.name).replace(/\{price\}/g,s.price).replace(/\{image\}/g,s.image_url)}))),(0,i.h)("p",{ref:s=>this.noResults=s,class:"s-search-no-results-placeholder"},this.noResultsText)));return this.inline?(0,i.h)("div",{id:"s-search-modal"},e):(0,i.h)("salla-modal",{position:"top",id:"s-search-modal",ref:s=>this.modal=s},e)}componentDidLoad(){this.afterSearching()}get host(){return(0,i.g)(this)}};l.style="#s-search-modal .s-search-inline{border:1px solid #eee}#s-search-modal .s-search-no-results .s-search-input,#s-search-modal .s-search-container-open .s-search-input{border-bottom:1px solid #f4f4f5}#s-search-modal .s-search-product-image[src=null]{opacity:0}#s-search-modal .s-modal-wrapper{align-items:flex-start;padding:0}#s-search-modal .s-modal-spacer{display:inline}#s-search-modal .s-modal-body{padding:0;max-width:90%;margin-top:3.2rem;border-radius:0.5rem;background:transparent;overflow:visible}#s-search-modal .s-modal-close{top:50%;transform:translateY(-50%)}";const o=class{constructor(s){(0,i.r)(this,s),this.modalOpened=(0,i.c)(this,"modalOpened",7),this.modalClosed=(0,i.c)(this,"modalClosed",7),this.isClosable=!0,this.width="md",this.position="middle",this.visible=!1,this.isLoading=!1,this.subTitleFirst=!1,this.noPadding=!1,this.subTitle="",this.icon="",this.iconStyle="",this.imageIcon="",a.H.setHost(this.host),salla.event.on("modal::open",(s=>s.dataset.target==this.host.id&&this.show())),salla.event.on("modal::close",(s=>s.dataset.target==this.host.id&&this.hide())),this.title=this.host.title,this.host.removeAttribute("title")}handleVisible(s){if(!s)return this.toggleModal(!1),void this.modalClosed.emit();this.host.classList.remove("s-hidden"),setTimeout((()=>this.toggleModal(!0))),this.modalOpened.emit()}async show(){return this.host.setAttribute("visible",""),this.host}async hide(){return this.host.removeAttribute("visible"),this.host}async setTitle(s){return this.title=s,this.host}async loading(){return this.isLoading=!0,this.host}async stopLoading(){return this.isLoading=!1,this.host}toggleModal(s){const e=this.host.querySelector(".s-modal-body");a.H.toggleElement(e,"s-modal-entering","s-modal-leaving",(()=>s)).toggleElement(this.overlay,"s-modal-entering","s-modal-overlay-leaving",(()=>s)).toggleElement(document.body,"modal-is-open","modal-is-closed",(()=>s)),s||setTimeout((()=>this.host.classList.add("s-hidden")),350)}closeModal(){this.isClosable&&this.host.removeAttribute("visible")}iconBlockClasses(){return{"s-modal-icon":!0,"s-modal-bg-error":"error"==this.iconStyle,"s-modal-bg-success":"success"==this.iconStyle,"s-modal-bg-normal":"error"!=this.iconStyle&&"success"!=this.iconStyle,"s-modal-bg-primary":"primary"==this.iconStyle}}iconClasses(){return{[this.icon]:!0,"sicon-alert-engine":!this.icon&&"error"==this.iconStyle&&!this.imageIcon,"sicon-check-circle2":!this.icon&&"success"==this.iconStyle&&!this.imageIcon}}render(){return this.host.id=this.host.id||"salla-modal",(0,i.h)(i.H,{class:"salla-modal s-modal-container s-hidden","aria-modal":"true",role:"dialog"},(0,i.h)("div",{class:"s-modal-overlay",ref:s=>this.overlay=s,onClick:()=>this.closeModal()}),(0,i.h)("div",{class:"s-modal-wrapper"},(0,i.h)("span",{class:"s-modal-spacer s-modal-align-"+this.position},"â€‹"),(0,i.h)("div",{class:"s-modal-body s-modal-align-"+this.position+" s-modal-"+this.width+(this.noPadding?" s-modal-nopadding":" s-modal-padding")},this.isLoading?(0,i.h)("div",{class:"s-modal-loader-wrap"},(0,i.h)("span",{class:"s-modal-loader"})):[(0,i.h)("div",{class:{"s-modal-header":!0,"s-modal-is-center":""!=this.icon||""!=this.imageIcon}},this.isClosable?(0,i.h)("button",{class:"s-modal-close",onClick:()=>this.closeModal(),type:"button"},(0,i.h)("span",{class:"sicon-cancel"})):"",this.title||this.subTitle?(0,i.h)("div",{class:"s-modal-header-inner"},this.iconStyle||this.icon?(0,i.h)("div",{class:this.iconBlockClasses()},(0,i.h)("i",{class:this.iconClasses()})):this.imageIcon?(0,i.h)("img",{class:"s-modal-header-img",src:this.imageIcon}):"",(0,i.h)("div",{class:"s-modal-header-content"},(0,i.h)("div",{class:{"s-modal-title":!0,"s-modal-title-below":this.subTitleFirst},innerHTML:this.title}),(0,i.h)("p",{class:{"s-modal-sub-title":!0},innerHTML:this.subTitle}))):""),(0,i.h)("slot",null),(0,i.h)("slot",{name:"footer"})])))}get host(){return(0,i.g)(this)}static get watchers(){return{visible:["handleVisible"]}}};o.style=".salla-modal .s-modal-wrapper{height:calc(var(--vh, 1vh) * 100)}"},3863:(s,e,t)=>{t.d(e,{H:()=>a}),salla.event.setMaxListeners(20);class i extends salla.AppHelpers{setHost(s){this.host=s}getElement(s){return this.host.querySelector(s)}getAttribute(s,e){var t;return null===(t=this.getElement(s))||void 0===t?void 0:t.getAttribute(e)}val(s){return this.getAttribute(s,"value")}isUser(){return"user"===salla.config.get("user.type")}}const a=new i}}]);