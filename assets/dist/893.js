(self.webpackChunkTheme_One=self.webpackChunkTheme_One||[]).push([[893],{2893:(e,t,n)=>{"use strict";n.r(t),n.d(t,{salla_branches:()=>o});var i=n(4634);let s=n(2195),r=n(8855),a=s.createStore(r);const o=class{constructor(e){(0,i.r)(this,e),this.open=!1,this.isOpenedBefore=a.get("branch-choosed-before"),this.displayAs="default",this.browseProductsFrom="all",this.branches=[{id:1,name:"فرع الرياض",open:!0,available:!0,limited:!1,tag:"متوفر"},{id:2,name:"فرع جدة",open:!1,available:!1,limited:!1,tag:"غير متوفر"},{id:3,name:"فرع مكة",open:!0,available:!0,limited:!1,tag:"متوفر"},{id:4,name:"فرع المدينة",open:!0,available:!0,limited:!1,tag:"متوفر"},{id:5,name:"فرع جازان",open:!0,available:!0,limited:!0,tag:"الكمية محدودة"}],this.current=1,this.currentBranch=e=>this.branches.filter((e=>e.id==this.current))[0][e],this.statusColor=(e=null)=>e?e.limited?"text-red-400":e.available?"text-green-500":"text-gray-400":this.currentBranch("limited")?"text-red-400":this.currentBranch("available")?"text-green-500":"text-gray-400",this.isChoiceable=()=>"all"!==this.browseProductsFrom&&"single"==this.position||"header"==this.position,this.formTitle=()=>this.isChoiceable()?"توفر المنتج في الفروع الآخرى":"التسوق من فرع آخر",salla.event.on("branches::show",(()=>this.show()))}async show(){return this.modal.show()}async hide(){return this.modal.hide()}handelChange(e){this.selected=e.target.value}handleSubmit(){this.btn.load().then((()=>{setTimeout((()=>location.reload()),2e3)})),a.set("branch-choosed-before",!0),this.show(),setTimeout((()=>{this.current=this.selected}),300)}render(){return(0,i.h)("salla-modal",{icon:"sicon-store-alt",title:"فرع الرياض","sub-title":"أنت الآن تتصفح المتجر من","sub-title-first":!0,"is-closable":this.isOpenedBefore||"popup"!=this.displayAs?"true":"false",ref:e=>this.modal=e,"modal-width":"w-116",id:"s-branches-modal",class:"hidden"},(0,i.h)("fieldset",null,(0,i.h)("h4",{class:"s-branches-title"},this.formTitle()),(0,i.h)("legend",{class:"s-branches-sr-only"},this.formTitle()),this.branches.length<=5?(0,i.h)("div",{class:"s-branches-space-v"},this.branches.map((e=>(0,i.h)("div",{class:"s-branches-input-wrap"},(0,i.h)("input",{id:this.position+"_branch_"+e.id,disabled:!e.open&&this.isChoiceable(),name:"lang",type:"radio",value:e.id,onChange:e=>this.handelChange(e),class:{"s-branches-input":!0,"opacity-50":!e.open,hidden:!this.isChoiceable()},checked:this.current==e.id}),(0,i.h)("label",{htmlFor:this.position+"_branch_"+e.id,class:{"s-branches-label":!0,"s-branches-clickable":this.isChoiceable()}},(0,i.h)("span",{class:{"s-branches-is-closed":!e.open}},e.name),this.isChoiceable()?(0,i.h)("small",{class:"s-branches-closed-badge"},e.open?"":"مُغلق"):(0,i.h)("span",{class:this.statusColor(e)},e.tag)))))):(0,i.h)("select",{class:"s-branches-select",onInput:e=>this.handelChange(e)},this.branches.map((e=>(0,i.h)("option",{value:e.id,disabled:!e.open,selected:this.selected==e.id},e.name," ",e.open?"":"- مُغلق"))))),this.isChoiceable()?(0,i.h)("slot",{name:"footer"},(0,i.h)("salla-button",{"loader-position":"before",ref:e=>this.btn=e,onClick:()=>this.handleSubmit(),class:"s-branches-submit"},salla.lang.get("common.elements.ok"))):"")}componentDidRender(){this.isOpenedBefore||"popup"!=this.displayAs||this.show()}get host(){return(0,i.g)(this)}};o.style=":host{display:block}"},2195:(e,t,n)=>{var i=n(9078),s=i.slice,r=i.pluck,a=i.each,o=i.bind,c=i.create,l=i.isList,h=i.isFunction,u=i.isObject;e.exports={createStore:p};var d={version:"2.0.12",enabled:!1,get:function(e,t){var n=this.storage.read(this._namespacePrefix+e);return this._deserialize(n,t)},set:function(e,t){return void 0===t?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(e){var t=this;this.storage.each((function(n,i){e.call(t,t._deserialize(n),(i||"").replace(t._namespaceRegexp,""))}))},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return p.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return p(this.storage,this.plugins,e)}};function p(e,t,n){n||(n=""),e&&!l(e)&&(e=[e]),t&&!l(t)&&(t=[t]);var i=n?"__storejs_"+n+"_":"",p=n?new RegExp("^"+i):null;if(!/^[a-zA-Z0-9_\-]*$/.test(n))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var f={_namespacePrefix:i,_namespaceRegexp:p,_testStorage:function(e){try{var t="__storejs__test__";e.write(t,t);var n=e.read(t)===t;return e.remove(t),n}catch(e){return!1}},_assignPluginFnProp:function(e,t){var n=this[t];this[t]=function(){var t=s(arguments,0),i=this;function r(){if(n)return a(arguments,(function(e,n){t[n]=e})),n.apply(i,t)}var o=[r].concat(t);return e.apply(i,o)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(e,t){if(!e)return t;var n="";try{n=JSON.parse(e)}catch(t){n=e}return void 0!==n?n:t},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(e){var t=this;if(l(e))a(e,(function(e){t._addPlugin(e)}));else if(!r(this.plugins,(function(t){return e===t}))){if(this.plugins.push(e),!h(e))throw new Error("Plugins must be function values that return objects");var n=e.call(this);if(!u(n))throw new Error("Plugins must return an object of function properties");a(n,(function(n,i){if(!h(n))throw new Error("Bad plugin property: "+i+" from plugin "+e.name+". Plugins should only return functions.");t._assignPluginFnProp(n,i)}))}},addStorage:function(e){!function(){var e="undefined"==typeof console?null:console;e&&(e.warn?e.warn:e.log).apply(e,arguments)}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},b=c(f,d,{plugins:[]});return b.raw={},a(b,(function(e,t){h(e)&&(b.raw[t]=o(b,e))})),a(e,(function(e){b._addStorage(e)})),a(t,(function(e){b._addPlugin(e)})),b}},9078:(e,t,n)=>{var i=Object.assign?Object.assign:function(e,t,n,i){for(var s=1;s<arguments.length;s++)c(Object(arguments[s]),(function(t,n){e[n]=t}));return e},s=function(){if(Object.create)return function(e,t,n,s){var r=o(arguments,1);return i.apply(this,[Object.create(e)].concat(r))};{function e(){}return function(t,n,s,r){var a=o(arguments,1);return e.prototype=t,i.apply(this,[new e].concat(a))}}}(),r=String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},a="undefined"!=typeof window?window:n.g;function o(e,t){return Array.prototype.slice.call(e,t||0)}function c(e,t){l(e,(function(e,n){return t(e,n),!1}))}function l(e,t){if(h(e)){for(var n=0;n<e.length;n++)if(t(e[n],n))return e[n]}else for(var i in e)if(e.hasOwnProperty(i)&&t(e[i],i))return e[i]}function h(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}e.exports={assign:i,create:s,trim:r,bind:function(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}},slice:o,each:c,map:function(e,t){var n=h(e)?[]:{};return l(e,(function(e,i){return n[i]=t(e,i),!1})),n},pluck:l,isList:h,isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},isObject:function(e){return e&&"[object Object]"==={}.toString.call(e)},Global:a}},8855:(e,t,n)=>{var i=n(9078).Global;function s(){return i.sessionStorage}function r(e){return s().getItem(e)}e.exports={name:"sessionStorage",read:r,write:function(e,t){return s().setItem(e,t)},each:function(e){for(var t=s().length-1;t>=0;t--){var n=s().key(t);e(r(n),n)}},remove:function(e){return s().removeItem(e)},clearAll:function(){return s().clear()}}}}]);