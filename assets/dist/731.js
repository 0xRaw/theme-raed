"use strict";(self.webpackChunkTheme_One=self.webpackChunkTheme_One||[]).push([[731],{731:(t,e,i)=>{i.r(e),i.d(e,{salla_button:()=>l,salla_localization:()=>r,salla_login:()=>n,salla_modal:()=>h,salla_search:()=>o,salla_tel_input:()=>m,salla_verify:()=>p});var s=i(378),a=i(863);const n=class{constructor(t){(0,s.r)(this,t),this.regType="phone",this.title=salla.lang.get("blocks.header.login"),this.loginTypeTitle=salla.lang.get("blocks.header.select_login_way"),this.loginText=salla.lang.get("blocks.header.login"),this.smsLabel=salla.lang.get("blocks.header.sms"),this.mobileLabel=salla.lang.get("common.elements.mobile"),this.emailLabel=salla.lang.get("common.elements.email"),this.enterText=salla.lang.get("blocks.header.enter"),this.bySMSText=salla.lang.get("blocks.header.login_by_sms"),this.byEmailText=salla.lang.get("blocks.header.login_by_email"),this.emailErrorMsg=salla.lang.get("common.elements.email_is_valid"),this.firstNameLabel=salla.lang.get("blocks.header.your_name"),this.lastNameLabel=salla.lang.get("pages.profile.last_name"),this.firstNameErrorMsg=salla.lang.get("common.errors.field_required",{attribute:this.firstNameLabel}),this.lastNameErrorMsg=salla.lang.get("common.errors.field_required",{attribute:this.lastNameLabel}),this.typing=(t,e)=>{const i=t.target.nextElementSibling;t.target.classList.remove("s-has-error"),(null==i?void 0:i.classList.contains("s-login-error-message"))&&(i.innerText=""),"Enter"==t.key&&e()},this.loginBySMS=async()=>{const{mobile:t,countryCode:e}=await this.loginTelInput.getValues();await this.loginTelInput.isValid()&&this.smsBtn.load().then((()=>this.smsBtn.disable())).then((()=>salla.auth.api.login({type:"mobile",phone:t,country_code:e}))).then((()=>this.smsBtn.stop()&&this.smsBtn.enable())).then((()=>this.showTab(this.verifyTab))).then((()=>(this.verifyTab.by="sms")&&(this.verifyTab.url="auth/mobile/verify"))).then((()=>this.verifyTab.show({phone:t,country_code:e})))},this.loginByEmail=()=>{a.H.isValidEmail(this.loginEmail.value)?this.emailBtn.load().then((()=>this.emailBtn.disable())).then((()=>salla.auth.api.login({type:"email",email:this.loginEmail.value}))).then((()=>this.emailBtn.stop()&&this.emailBtn.enable())).then((()=>this.showTab(this.verifyTab))).then((()=>this.verifyTab.by="email")).then((()=>this.verifyTab.show({email:this.loginEmail.value}))):this.validateField(this.loginEmail,this.emailErrorMsg)},this.newUser=async()=>{var t;const{mobile:e,countryCode:i,countryKey:s}=await this.regTelInput.getValues(),a=this.regEmail.value||(null===(t=this.loginEmail)||void 0===t?void 0:t.value);await this.newUserValidation(),await this.regBtn.load(),await this.regBtn.disable();let n={first_name:this.firstName.value,last_name:this.lastName.value,phone:e||this.loginTelInput.mobile,country_code:i,country_key:s,verified_by:this.regType};a&&(n=Object.assign(Object.assign({},n),{email:a})),this.verifyTab.getCode().then((t=>salla.auth.api.register(Object.assign(Object.assign({},n),{code:t})))).then((()=>window.location.reload())).catch((()=>this.regBtn.stop()&&this.regBtn.enable()))},this.title=this.host.title||salla.lang.get("blocks.header.login"),this.host.removeAttribute("title"),salla.event.on("languages::translations.loaded",(()=>{var t;this.title=salla.lang.get("blocks.header.login"),this.loginTypeTitle=salla.lang.get("blocks.header.select_login_way"),this.loginText=salla.lang.get("blocks.header.login"),this.smsLabel=salla.lang.get("blocks.header.sms"),this.mobileLabel=salla.lang.get("common.elements.mobile"),this.emailLabel=salla.lang.get("common.elements.email"),this.enterText=salla.lang.get("blocks.header.enter"),this.bySMSText=salla.lang.get("blocks.header.login_by_sms"),this.byEmailText=salla.lang.get("blocks.header.login_by_email"),this.emailErrorMsg=salla.lang.get("common.elements.email_is_valid"),this.firstNameLabel=salla.lang.get("blocks.header.your_name"),this.lastNameLabel=salla.lang.get("pages.profile.last_name"),this.firstNameErrorMsg=salla.lang.get("common.errors.field_required",{attribute:this.firstNameLabel}),this.lastNameErrorMsg=salla.lang.get("common.errors.field_required",{attribute:this.lastNameLabel}),null===(t=this.modal)||void 0===t||t.setTitle(this.title)})),salla.auth.event.onVerificationFailed((()=>{})),salla.event.on("login::show",(()=>this.show()))}onVerified(t){if(t.detail.case){if("new_customer"===t.detail.case)return this.showTab(this.registrationTab);if("redirect"===salla.auth.event.getTypeActionOnVerified())return t.redirect_url?window.location.href=t.redirect_url:void window.location.reload()}else console.log("verified but without case!")}async show(){return this.isEmailAllowed&&this.isMobileAllowed?this.showTab(this.homeTab):this.isEmailAllowed?this.showTab(this.emailTab):this.isMobileAllowed&&this.showTab(this.mobileTab),this.modal.show()}showTab(t,e){var i,s;null==e||e.preventDefault(),[this.homeTab,this.mobileTab,this.emailTab,this.verifyTab,this.registrationTab].map((e=>a.H.toggleElement(e,"visible","s-hidden",(()=>e==t)))),setTimeout((()=>{[this.homeTab,this.mobileTab,this.emailTab,this.verifyTab,this.registrationTab].map((e=>a.H.toggleElement(e,"s-login-active","s-login-unactive",(()=>e==t))))}),200),setTimeout((()=>{this.host.querySelector(".s-login-wrapper").setAttribute("style","height:"+(null==t?void 0:t.scrollHeight)+"px")})),[this.mobileTab,this.emailTab].includes(t)&&(this.regType=t===this.mobileTab?"phone":"email");let n=t==this.registrationTab;return n&&(null===(i=this.firstName)||void 0===i||i.focus()),null===(s=this.modal)||void 0===s||s.setTitle(n?salla.lang.get("common.titles.registration"):this.title),n||a.H.toggleElement(this.regMobileBlock,"s-hidden","s-block",(()=>"phone"===this.regType)).toggleElement(this.regEmailBlock,"s-hidden","s-block",(()=>"email"===this.regType)),this}async newUserValidation(){const t="phone"==this.regType,e=this.regEmail.value||"email"==this.regType&&this.loginEmail.value,i=a.H.isValidEmail(e),s=this.firstName.value.length>0,n=this.lastName.value.length>0,o=await this.regTelInput.isValid()||t&&await this.loginTelInput.isValid();if(!((e&&i||!e&&!this.isEmailRequired)&&o&&s&&n))throw!i&&this.validateField(this.regEmail,this.emailErrorMsg),!s&&this.validateField(this.firstName,this.firstNameErrorMsg),!n&&this.validateField(this.lastName,this.lastNameErrorMsg),"Please insert required fields"}validateField(t,e){t.classList.add("s-has-error"),t.nextElementSibling.innerText="* "+e}render(){return(0,s.h)("salla-modal",{id:"salla-login",icon:"sicon-user",title:this.title,ref:t=>this.modal=t,width:"xs"},(0,s.h)("div",{class:"s-login-wrapper"},this.isEmailAllowed&&this.isMobileAllowed?(0,s.h)("div",{class:"s-login-tab",ref:t=>this.homeTab=t},(0,s.h)("p",{class:"s-login-sub-title"},this.loginTypeTitle),(0,s.h)("slot",{name:"before-login-type"}),(0,s.h)("a",{href:"#",class:"s-login-main-btn",onClick:t=>this.showTab(this.mobileTab,t)},(0,s.h)("i",{class:"s-login-main-btn-icon sicon-phone"}),(0,s.h)("span",{class:"s-login-main-btn-text"},this.smsLabel),(0,s.h)("i",{class:"main-btn-arrow sicon-keyboard_arrow_left"})),(0,s.h)("a",{href:"#",class:"s-login-main-btn",onClick:t=>this.showTab(this.emailTab,t)},(0,s.h)("i",{class:"s-login-main-btn-icon sicon-mail"}),(0,s.h)("span",{class:"s-login-main-btn-text"},this.emailLabel),(0,s.h)("i",{class:"main-btn-arrow sicon-keyboard_arrow_left"})),(0,s.h)("slot",{name:"after-login-type"})):"",this.isMobileAllowed?(0,s.h)("div",{class:"s-login-tab",ref:t=>this.mobileTab=t},(0,s.h)("slot",{name:"before-login-mobile"}),(0,s.h)("label",{class:"s-login-label"},this.mobileLabel),(0,s.h)("salla-tel-input",{ref:t=>this.loginTelInput=t,onKeyDown:t=>this.typing(t,this.loginBySMS)}),(0,s.h)("salla-button",{"loader-position":"center",wide:!0,onClick:()=>this.loginBySMS(),ref:t=>this.smsBtn=t},this.enterText),this.isEmailAllowed?(0,s.h)("a",{href:"#",onClick:()=>this.showTab(this.emailTab),class:"s-login-link"},this.byEmailText):"",(0,s.h)("slot",{name:"after-login-mobile"})):"",this.isEmailAllowed?(0,s.h)("div",{class:"s-login-tab",ref:t=>this.emailTab=t},(0,s.h)("slot",{name:"before-login-email"}),(0,s.h)("label",{class:"s-login-label"},this.emailLabel),(0,s.h)("input",{type:"email",ref:t=>this.loginEmail=t,onKeyDown:t=>this.typing(t,this.loginByEmail),placeholder:"your@email.com",class:"s-login-input s-ltr"}),(0,s.h)("span",{class:"s-login-error-message"}),(0,s.h)("salla-button",{"loader-position":"center",wide:!0,onClick:()=>this.loginByEmail(),ref:t=>this.emailBtn=t},this.enterText),this.isMobileAllowed?(0,s.h)("a",{href:"#",onClick:()=>this.showTab(this.mobileTab),class:"s-login-link"},this.bySMSText):"",(0,s.h)("slot",{name:"after-login-email"})):"",(0,s.h)("salla-verify",{"without-modal":!0,ref:t=>this.verifyTab=t,autoReload:!1},(0,s.h)("a",{onClick:()=>this.showTab("phone"==this.regType?this.mobileTab:this.emailTab),class:"s-verify-back sicon-arrow-right",slot:"after-footer",href:"#"})),(0,s.h)("div",{ref:t=>this.registrationTab=t},(0,s.h)("slot",{name:"before-registration"}),(0,s.h)("label",{class:"s-login-label"},this.firstNameLabel),(0,s.h)("input",{type:"text",class:"s-login-input",ref:t=>this.firstName=t,onKeyDown:t=>this.typing(t,this.newUser),placeholder:salla.lang.get("pages.profile.first_name")}),(0,s.h)("span",{class:"s-login-error-message"}),(0,s.h)("label",{class:"s-login-label"},this.lastNameLabel),(0,s.h)("input",{type:"text",class:"s-login-input",ref:t=>this.lastName=t,onKeyDown:t=>this.typing(t,this.newUser),placeholder:salla.lang.get("pages.profile.last_name")}),(0,s.h)("span",{class:"s-login-error-message"}),(0,s.h)("div",{ref:t=>this.regMobileBlock=t,class:"mb-1.5"},(0,s.h)("label",{class:"s-login-label"},this.mobileLabel),(0,s.h)("salla-tel-input",{ref:t=>this.regTelInput=t,onKeyDown:t=>this.typing(t,this.newUser)})),(0,s.h)("div",{ref:t=>this.regEmailBlock=t,class:"mb-1.5"},(0,s.h)("label",{class:"s-login-label"},this.emailLabel),(0,s.h)("input",{type:"email",ref:t=>this.regEmail=t,onKeyDown:t=>this.typing(t,this.newUser),placeholder:"your@email.com",class:"s-login-input s-ltr"}),(0,s.h)("span",{class:"s-login-error-message"})),(0,s.h)("salla-button",{"loader-position":"center",wide:!0,onClick:()=>this.newUser(),ref:t=>this.regBtn=t},salla.lang.get("blocks.header.register")),(0,s.h)("slot",{name:"after-registration"}))))}get host(){return(0,s.g)(this)}};n.style="salla-verify{display:block}#salla-login .s-modal-body{overflow:inherit}";const o=class{constructor(t){var e;(0,s.r)(this,t),a.H.setHost(this.host),this.productSlot=(null===(e=a.H.getElement('[slot="product"]'))||void 0===e?void 0:e.innerHTML)||this.getDefaultProductSlot(),salla.event.on("search::show",(()=>this.modal.show())),salla.event.on("languages::translations.loaded",(()=>{this.placeholder=salla.lang.get("blocks.header.search_placeholder"),this.noResultsText=salla.lang.get("common.elements.no_options")}))}onModalOpen(){this.modal.querySelector(".s-search-input").focus()}onModalClose(){this.modal.querySelector(".s-search-input").value="",this.results=void 0,this.afterSearching()}getDefaultProductSlot(){return'<div class="s-search-product-image-container">  <img class="s-search-product-image" src="{image}" alt="{name}"/></div><div class="s-search-product-details">  <div class="s-search-product-name">{name}</div> <div class="s-search-product-price">{price}</div></div>'}search(t){if(a.H.hideElement(this.noResults),0===t.target.value.length)return this.results=void 0,void this.afterSearching();t.target.value.length<=2||(a.H.toggleElement(this.searchIcon,"s-search-spinner-loader","sicon-search",(()=>!0)),salla.search.api.search(t.target.value).then((t=>this.results=t)).catch((t=>"Query Same As Previous!"!==t?this.results=void 0:null)).finally((()=>this.afterSearching(!1))))}afterSearching(t=!0){var e;this.noResults.style.display=t||(null===(e=this.results)||void 0===e?void 0:e.data.length)>0?"none":"block",a.H.toggleElement(this.container,"s-search-container-open","no-results",(()=>{var t;return null===(t=this.results)||void 0===t?void 0:t.data.length})).toggleElement(this.searchIcon,"s-search-spinner-loader","sicon-search",(()=>!1)),salla.search.api.previousQuery=""}render(){var t;return(0,s.h)("salla-modal",{position:"top",id:"s-search-modal",ref:t=>this.modal=t},(0,s.h)("div",{class:"s-search-container",ref:t=>this.container=t},(0,s.h)("input",{class:"s-search-input",type:"text",placeholder:this.placeholder,onInput:t=>this.search(t)}),(0,s.h)("span",{class:"s-search-icon"},(0,s.h)("i",{class:"sicon-search",ref:t=>this.searchIcon=t})),(0,s.h)("div",{class:"s-search-results"},null===(t=this.results)||void 0===t?void 0:t.data.map((t=>(0,s.h)("a",{href:t.url,class:"s-search-product",innerHTML:this.productSlot.replace(/\{name\}/g,t.name).replace(/\{price\}/g,t.price).replace(/\{image\}/g,t.image_url)}))),(0,s.h)("p",{ref:t=>this.noResults=t,class:"s-search-no-results"},this.noResultsText))))}componentDidLoad(){this.afterSearching()}get host(){return(0,s.g)(this)}};o.style="#s-search-modal .s-modal-wrapper{align-items:flex-start;padding:0}#s-search-modal .s-modal-spacer{display:inline}#s-search-modal .s-modal-body{padding:0;max-width:90%;margin-top:3.2rem;border-radius:0.5rem}#s-search-modal .s-modal-close{top:1rem}";const l=class{constructor(t){(0,s.r)(this,t),this.btnStyle="primary",this.loading=!1,this.disabled=!1,this.loaderPosition="before",this.wide=!1,this.hostAttributes={};for(let t=0;t<this.host.attributes.length;t++)this.hostAttributes[this.host.attributes[t].name]=this.host.attributes[t].value;this.hostAttributes.type=this.hostAttributes.type||"button",this.hostAttributes.class+=" s-button-btn btn--has-loading s-button-"+this.btnStyle+(this.wide?" s-button-wide ":"")+" loader-"+this.loaderPosition+("before"==this.loaderPosition?" s-button-loader-after":""),delete this.hostAttributes["btn-style"],delete this.hostAttributes.id,delete this.hostAttributes["data-on-click"],this.wide&&this.host.classList.add("s-button-wide")}async load(){return"center"==this.loaderPosition&&this.text.classList.add("s-button-hide"),this.host.setAttribute("loading",""),this.host}async stop(){return this.host.removeAttribute("loading"),"center"==this.loaderPosition&&this.text.classList.remove("s-button-hide"),this.host}async setText(t){return this.text.innerHTML=t,this.host}async disable(){this.host.setAttribute("disabled","")}async enable(){this.host.removeAttribute("disabled")}handleVisible(t,e){this.btn.classList.remove("btn-"+e),this.btn.classList.add("btn-"+t)}handleLoading(t){a.H.toggleElement(this.btn,"btn--is-loading","btn--no-loading",(()=>t))}render(){return(0,s.h)(s.H,{class:"s-button-host-tag"},(0,s.h)("button",Object.assign({ref:t=>this.btn=t,disabled:this.disabled},this.hostAttributes),(0,s.h)("span",{class:"s-button-text",ref:t=>this.text=t},(0,s.h)("slot",null)),this.loading?(0,s.h)("span",{class:{"s-button-loader":!0,"s-button-loader-start":"start"===this.loaderPosition,"s-button-loader-end":"end"===this.loaderPosition,"s-button-loader-center":"center"===this.loaderPosition}}):""))}get host(){return(0,s.g)(this)}static get watchers(){return{btnStyle:["handleVisible"],loading:["handleLoading"]}}};l.style=":host{display:block}";const r=class{constructor(t){var e,i;(0,s.r)(this,t),this.language=salla.config.get("language",{}),this.currency=salla.config.get("currency",{}),this.languages=[],this.currencies=[],a.H.setHost(this.host),salla.event.on("localization::show",(()=>this.show())),salla.event.on("languages::translations.loaded",(()=>{var t;this.languagesTitle=salla.lang.get("common.titles.language"),this.currenciesTitle=salla.lang.get("common.titles.currency"),null===(t=this.btn)||void 0===t||t.setText(salla.lang.get("common.elements.ok"))})),this.languageSlot=(null===(e=a.H.getElement('[slot="language"]'))||void 0===e?void 0:e.innerHTML)||'<label class="s-localization-label" for="lang-{code}"><span>{name}</span><div class="s-localization-flag flag iti__flag iti__{country_code}"></div></label>',this.currencySlot=(null===(i=a.H.getElement('[slot="currency"]'))||void 0===i?void 0:i.innerHTML)||'<label class="s-localization-label" for="currency-{code}"><span>{name}</span><small class="s-localization-currency">{code}</small></label>'}async show(){return this.getLanguages().then((()=>this.getCurrencies())).then((()=>this.modal.show()))}async hide(){return this.modal.hide()}async getLanguages(){return this.languages.length>1?null:await salla.config.languages().then((t=>this.languages=t))}async getCurrencies(){return this.currencies.length>1?null:await salla.config.currencies().then((t=>this.currencies=t))}onChangeCurrency(t){this.currency=salla.config.get("currencies."+t.target.value)}onChangeLanguage(t){this.language=salla.config.get("languages."+t.target.value)}async submit(){let t;console.log("this.currency.code::::",this.currency,this.currency.code),this.btn.load().then((()=>this.currency.code===salla.config.get("user.currency_code","SAR")||(t=window.location.href)&&salla.currency.api.change(this.currency.code))).then((()=>this.language.code===salla.config.get("user.language_code","ar")||(t=this.language.url))).then((()=>this.btn.stop())).then((()=>this.hide())).then((()=>t&&(window.location.href=t)))}render(){return(0,s.h)("salla-modal",{id:"salla-localization",class:"s-hidden",ref:t=>this.modal=t,width:"xs"},(0,s.h)("div",{slot:"header"},(0,s.h)("slot",{name:"header"})),(0,s.h)("div",{class:"s-localization-inner"},this.languages.length>1?(0,s.h)("div",{class:"s-localization-section"},(0,s.h)("label",{class:"s-localization-title"},this.languagesTitle),(0,s.h)("div",{class:"s-localization-section-inner"},this.languages.length<6?this.languages.map((t=>(0,s.h)("div",{class:"s-localization-item"},(0,s.h)("input",{class:"s-localization-input",type:"radio",checked:this.language.code==t.code,onChange:()=>this.language=t,name:"language",id:"lang-"+t.code.toLowerCase(),value:t.code}),(0,s.h)("div",{id:"language-slot",innerHTML:this.languageSlot.replace(/\{name\}/g,t.name).replace(/\{code\}/g,t.code).replace(/\{country_code\}/g,t.country_code)})))):(0,s.h)("select",{class:"s-branches-select",name:"currency",onChange:t=>this.onChangeLanguage(t)},this.languages.map((t=>(0,s.h)("option",{value:t.code,selected:this.language.code==t.code},t.name)))))):"",this.currencies.length>1?(0,s.h)("div",{class:"s-localization-section"},(0,s.h)("label",{class:"s-localization-title"},this.currenciesTitle),(0,s.h)("div",{class:"s-localization-section-inner"},this.currencies.length<6?this.currencies.map((t=>(0,s.h)("div",{class:"s-localization-item"},(0,s.h)("input",{class:"s-localization-input",type:"radio",name:"currency",checked:this.currency.code==t.code,onChange:()=>this.currency=t,id:"currency-"+t.code,value:t.code}),(0,s.h)("div",{id:"currency-slot",innerHTML:this.currencySlot.replace(/\{name\}/g,t.name).replace(/\{code\}/g,t.code).replace(/\{country_code\}/g,t.country_code)})))):(0,s.h)("select",{class:"s-branches-select",name:"currency",onChange:t=>this.onChangeCurrency(t)},this.currencies.map((t=>(0,s.h)("option",{value:t.code,selected:this.currency.code==t.code},t.name)))))):""),(0,s.h)("slot",{name:"footer"},(0,s.h)("salla-button",{wide:!0,ref:t=>this.btn=t,onClick:()=>this.submit()},salla.lang.get("common.elements.ok"))))}componentDidRender(){this.host.querySelectorAll("#currency-slot").forEach((t=>t.replaceWith(t.firstChild))),this.host.querySelectorAll("#language-slot").forEach((t=>t.replaceWith(t.firstChild)))}get host(){return(0,s.g)(this)}},h=class{constructor(t){(0,s.r)(this,t),this.modalOpened=(0,s.c)(this,"modalOpened",7),this.modalClosed=(0,s.c)(this,"modalClosed",7),this.error=!1,this.success=!1,this.primary=!1,this.isClosable=!0,this.width="md",this.position="middle",this.visible=!1,this.isLoading=!1,this.subTitleFirst=!1,this.noPadding=!1,this.subTitle="",this.icon="",this.imageIcon="",a.H.setHost(this.host),salla.event.on("modal::open",(t=>t.dataset.target==this.host.id&&this.show())),salla.event.on("modal::close",(t=>t.dataset.target==this.host.id&&this.hide())),this.title=this.host.title,this.host.removeAttribute("title")}handleVisible(t){if(!t)return this.toggleModal(!1),void this.modalClosed.emit();this.host.classList.remove("s-hidden"),setTimeout((()=>this.toggleModal(!0))),this.modalOpened.emit()}async show(){return this.host.setAttribute("visible",""),this.host}async hide(){return this.host.removeAttribute("visible"),this.host}async setTitle(t){return this.title=t,this.host}async loading(){return this.isLoading=!0,this.host}async stopLoading(){return this.isLoading=!1,this.host}toggleModal(t){a.H.toggleElement(this.host,"s-modal-entering","s-modal-leaving",(()=>t)).toggleElement(this.overlay,"s-modal-entering","s-modal-overlay-leaving",(()=>t)).toggleElement(document.body,"modal-is-open","modal-is-closed",(()=>t)),t||setTimeout((()=>this.host.classList.add("s-hidden")),350)}closeModal(){this.isClosable&&this.host.removeAttribute("visible")}iconBlockClasses(){return{"s-modal-icon":!0,"s-modal-bg-error":this.error,"s-modal-bg-success":this.success,"s-modal-bg-normal":!this.error&&!this.success,"s-modal-bg-primary":this.primary}}iconClasses(){return{[this.icon]:!0,"s-modal-text-error":this.error,"s-modal-text-success":this.success,"sicon-alert-engine":!this.icon&&this.error&&!this.imageIcon,"sicon-check-circle2":!this.icon&&this.success&&!this.imageIcon}}render(){return this.host.id=this.host.id||"salla-modal",(0,s.h)(s.H,{class:"s-modal-container s-hidden","aria-modal":"true",role:"dialog"},(0,s.h)("div",{class:"s-modal-wrapper"},(0,s.h)("div",{class:"s-modal-overlay",ref:t=>this.overlay=t,onClick:()=>this.closeModal()}),(0,s.h)("span",{class:"s-modal-spacer s-modal-align-"+this.position},"​"),(0,s.h)("div",{class:"s-modal-body s-modal-scroll-y s-modal-align-"+this.position+" s-modal-"+this.width+(this.noPadding?" s-modal-nopadding":" s-modal-padding")},this.isLoading?(0,s.h)("div",{class:"s-modal-loader-wrap"},(0,s.h)("span",{class:"s-modal-loader"})):[(0,s.h)("div",{class:{"s-modal-header":!0,"s-modal-is-center":""!=this.icon||""!=this.imageIcon}},this.isClosable?(0,s.h)("button",{class:"s-modal-close",onClick:()=>this.closeModal(),type:"button"},(0,s.h)("span",{class:"sicon-cancel"})):"",this.title||this.subTitle?(0,s.h)("div",{class:"s-modal-header-inner"},this.error||this.success||this.icon?(0,s.h)("div",{class:this.iconBlockClasses()},(0,s.h)("i",{class:this.iconClasses()})):this.imageIcon?(0,s.h)("img",{class:"s-modal-header-img",src:this.imageIcon}):"",(0,s.h)("div",{class:"s-modal-header-content"},(0,s.h)("div",{class:{"s-modal-title":!0,"s-modal-title-below":this.subTitleFirst},innerHTML:this.title}),(0,s.h)("p",{class:{"s-modal-sub-title":!0},innerHTML:this.subTitle}))):""),(0,s.h)("slot",null),(0,s.h)("slot",{name:"footer"})])))}get host(){return(0,s.g)(this)}static get watchers(){return{visible:["handleVisible"]}}};h.style="";var d,u,c,g=(c=function(t){return function(){for(var e=[["Afghanistan (‫افغانستان‬‎)","af","93"],["Albania (Shqipëri)","al","355"],["Algeria (‫الجزائر‬‎)","dz","213"],["American Samoa","as","1",5,["684"]],["Andorra","ad","376"],["Angola","ao","244"],["Anguilla","ai","1",6,["264"]],["Antigua and Barbuda","ag","1",7,["268"]],["Argentina","ar","54"],["Armenia (Հայաստան)","am","374"],["Aruba","aw","297"],["Ascension Island","ac","247"],["Australia","au","61",0],["Austria (Österreich)","at","43"],["Azerbaijan (Azərbaycan)","az","994"],["Bahamas","bs","1",8,["242"]],["Bahrain (‫البحرين‬‎)","bh","973"],["Bangladesh (বাংলাদেশ)","bd","880"],["Barbados","bb","1",9,["246"]],["Belarus (Беларусь)","by","375"],["Belgium (België)","be","32"],["Belize","bz","501"],["Benin (Bénin)","bj","229"],["Bermuda","bm","1",10,["441"]],["Bhutan (འབྲུག)","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina (Босна и Херцеговина)","ba","387"],["Botswana","bw","267"],["Brazil (Brasil)","br","55"],["British Indian Ocean Territory","io","246"],["British Virgin Islands","vg","1",11,["284"]],["Brunei","bn","673"],["Bulgaria (България)","bg","359"],["Burkina Faso","bf","226"],["Burundi (Uburundi)","bi","257"],["Cambodia (កម្ពុជា)","kh","855"],["Cameroon (Cameroun)","cm","237"],["Canada","ca","1",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde (Kabu Verdi)","cv","238"],["Caribbean Netherlands","bq","599",1,["3","4","7"]],["Cayman Islands","ky","1",12,["345"]],["Central African Republic (République centrafricaine)","cf","236"],["Chad (Tchad)","td","235"],["Chile","cl","56"],["China (中国)","cn","86"],["Christmas Island","cx","61",2,["89164"]],["Cocos (Keeling) Islands","cc","61",1,["89162"]],["Colombia","co","57"],["Comoros (‫جزر القمر‬‎)","km","269"],["Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)","cd","243"],["Congo (Republic) (Congo-Brazzaville)","cg","242"],["Cook Islands","ck","682"],["Costa Rica","cr","506"],["Côte d’Ivoire","ci","225"],["Croatia (Hrvatska)","hr","385"],["Cuba","cu","53"],["Curaçao","cw","599",0],["Cyprus (Κύπρος)","cy","357"],["Czech Republic (Česká republika)","cz","420"],["Denmark (Danmark)","dk","45"],["Djibouti","dj","253"],["Dominica","dm","1",13,["767"]],["Dominican Republic (República Dominicana)","do","1",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt (‫مصر‬‎)","eg","20"],["El Salvador","sv","503"],["Equatorial Guinea (Guinea Ecuatorial)","gq","240"],["Eritrea","er","291"],["Estonia (Eesti)","ee","372"],["Eswatini","sz","268"],["Ethiopia","et","251"],["Falkland Islands (Islas Malvinas)","fk","500"],["Faroe Islands (Føroyar)","fo","298"],["Fiji","fj","679"],["Finland (Suomi)","fi","358",0],["France","fr","33"],["French Guiana (Guyane française)","gf","594"],["French Polynesia (Polynésie française)","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia (საქართველო)","ge","995"],["Germany (Deutschland)","de","49"],["Ghana (Gaana)","gh","233"],["Gibraltar","gi","350"],["Greece (Ελλάδα)","gr","30"],["Greenland (Kalaallit Nunaat)","gl","299"],["Grenada","gd","1",14,["473"]],["Guadeloupe","gp","590",0],["Guam","gu","1",15,["671"]],["Guatemala","gt","502"],["Guernsey","gg","44",1,["1481","7781","7839","7911"]],["Guinea (Guinée)","gn","224"],["Guinea-Bissau (Guiné Bissau)","gw","245"],["Guyana","gy","592"],["Haiti","ht","509"],["Honduras","hn","504"],["Hong Kong (香港)","hk","852"],["Hungary (Magyarország)","hu","36"],["Iceland (Ísland)","is","354"],["India (भारत)","in","91"],["Indonesia","id","62"],["Iran (‫ایران‬‎)","ir","98"],["Iraq (‫العراق‬‎)","iq","964"],["Ireland","ie","353"],["Isle of Man","im","44",2,["1624","74576","7524","7924","7624"]],["Israel (‫ישראל‬‎)","il","972"],["Italy (Italia)","it","39",0],["Jamaica","jm","1",4,["876","658"]],["Japan (日本)","jp","81"],["Jersey","je","44",3,["1534","7509","7700","7797","7829","7937"]],["Jordan (‫الأردن‬‎)","jo","962"],["Kazakhstan (Казахстан)","kz","7",1,["33","7"]],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait (‫الكويت‬‎)","kw","965"],["Kyrgyzstan (Кыргызстан)","kg","996"],["Laos (ລາວ)","la","856"],["Latvia (Latvija)","lv","371"],["Lebanon (‫لبنان‬‎)","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya (‫ليبيا‬‎)","ly","218"],["Liechtenstein","li","423"],["Lithuania (Lietuva)","lt","370"],["Luxembourg","lu","352"],["Macau (澳門)","mo","853"],["North Macedonia (Македонија)","mk","389"],["Madagascar (Madagasikara)","mg","261"],["Malawi","mw","265"],["Malaysia","my","60"],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania (‫موريتانيا‬‎)","mr","222"],["Mauritius (Moris)","mu","230"],["Mayotte","yt","262",1,["269","639"]],["Mexico (México)","mx","52"],["Micronesia","fm","691"],["Moldova (Republica Moldova)","md","373"],["Monaco","mc","377"],["Mongolia (Монгол)","mn","976"],["Montenegro (Crna Gora)","me","382"],["Montserrat","ms","1",16,["664"]],["Morocco (‫المغرب‬‎)","ma","212",0],["Mozambique (Moçambique)","mz","258"],["Myanmar (Burma) (မြန်မာ)","mm","95"],["Namibia (Namibië)","na","264"],["Nauru","nr","674"],["Nepal (नेपाल)","np","977"],["Netherlands (Nederland)","nl","31"],["New Caledonia (Nouvelle-Calédonie)","nc","687"],["New Zealand","nz","64"],["Nicaragua","ni","505"],["Niger (Nijar)","ne","227"],["Nigeria","ng","234"],["Niue","nu","683"],["Norfolk Island","nf","672"],["North Korea (조선 민주주의 인민 공화국)","kp","850"],["Northern Mariana Islands","mp","1",17,["670"]],["Norway (Norge)","no","47",0],["Oman (‫عُمان‬‎)","om","968"],["Pakistan (‫پاکستان‬‎)","pk","92"],["Palau","pw","680"],["Palestine (‫فلسطين‬‎)","ps","970"],["Panama (Panamá)","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru (Perú)","pe","51"],["Philippines","ph","63"],["Poland (Polska)","pl","48"],["Portugal","pt","351"],["Puerto Rico","pr","1",3,["787","939"]],["Qatar (‫قطر‬‎)","qa","974"],["Réunion (La Réunion)","re","262",0],["Romania (România)","ro","40"],["Russia (Россия)","ru","7",0],["Rwanda","rw","250"],["Saint Barthélemy","bl","590",1],["Saint Helena","sh","290"],["Saint Kitts and Nevis","kn","1",18,["869"]],["Saint Lucia","lc","1",19,["758"]],["Saint Martin (Saint-Martin (partie française))","mf","590",2],["Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)","pm","508"],["Saint Vincent and the Grenadines","vc","1",20,["784"]],["Samoa","ws","685"],["San Marino","sm","378"],["São Tomé and Príncipe (São Tomé e Príncipe)","st","239"],["Saudi Arabia (‫المملكة العربية السعودية‬‎)","sa","966"],["Senegal (Sénégal)","sn","221"],["Serbia (Србија)","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65"],["Sint Maarten","sx","1",21,["721"]],["Slovakia (Slovensko)","sk","421"],["Slovenia (Slovenija)","si","386"],["Solomon Islands","sb","677"],["Somalia (Soomaaliya)","so","252"],["South Africa","za","27"],["South Korea (대한민국)","kr","82"],["South Sudan (‫جنوب السودان‬‎)","ss","211"],["Spain (España)","es","34"],["Sri Lanka (ශ්‍රී ලංකාව)","lk","94"],["Sudan (‫السودان‬‎)","sd","249"],["Suriname","sr","597"],["Svalbard and Jan Mayen","sj","47",1,["79"]],["Sweden (Sverige)","se","46"],["Switzerland (Schweiz)","ch","41"],["Syria (‫سوريا‬‎)","sy","963"],["Taiwan (台灣)","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand (ไทย)","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tokelau","tk","690"],["Tonga","to","676"],["Trinidad and Tobago","tt","1",22,["868"]],["Tunisia (‫تونس‬‎)","tn","216"],["Turkey (Türkiye)","tr","90"],["Turkmenistan","tm","993"],["Turks and Caicos Islands","tc","1",23,["649"]],["Tuvalu","tv","688"],["U.S. Virgin Islands","vi","1",24,["340"]],["Uganda","ug","256"],["Ukraine (Україна)","ua","380"],["United Arab Emirates (‫الإمارات العربية المتحدة‬‎)","ae","971"],["United Kingdom","gb","44",0],["United States","us","1",0],["Uruguay","uy","598"],["Uzbekistan (Oʻzbekiston)","uz","998"],["Vanuatu","vu","678"],["Vatican City (Città del Vaticano)","va","39",1,["06698"]],["Venezuela","ve","58"],["Vietnam (Việt Nam)","vn","84"],["Wallis and Futuna (Wallis-et-Futuna)","wf","681"],["Western Sahara (‫الصحراء الغربية‬‎)","eh","212",1,["5288","5289"]],["Yemen (‫اليمن‬‎)","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"],["Åland Islands","ax","358",1,["18"]]],i=0;i<e.length;i++){var s=e[i];e[i]={name:s[0],iso2:s[1],dialCode:s[2],priority:s[3]||0,areaCodes:s[4]||null}}var a={getInstance:function(t){var e=t.getAttribute("data-intl-tel-input-id");return window.intlTelInputGlobals.instances[e]},instances:{},documentReady:function(){return"complete"===document.readyState}};"object"==typeof window&&(window.intlTelInputGlobals=a);var n=0,o={allowDropdown:!0,autoHideDialCode:!0,autoPlaceholder:"polite",customContainer:"",customPlaceholder:null,dropdownContainer:null,excludeCountries:[],formatOnDisplay:!0,geoIpLookup:null,hiddenInput:"",initialCountry:"",localizedCountries:null,nationalMode:!0,onlyCountries:[],placeholderNumberType:"MOBILE",preferredCountries:["us","gb"],separateDialCode:!1,utilsScript:""},l=["800","822","833","844","855","866","877","880","881","882","883","884","885","886","887","888","889"],r=function(t,e){for(var i=Object.keys(t),s=0;s<i.length;s++)e(i[s],t[i[s]])},h=function(t){r(window.intlTelInputGlobals.instances,(function(e){window.intlTelInputGlobals.instances[e][t]()}))},d=function(){function i(t,e){var s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.id=n++,this.telInput=t,this.activeItem=null,this.highlightedItem=null;var a=e||{};this.options={},r(o,(function(t,e){s.options[t]=a.hasOwnProperty(t)?a[t]:e})),this.hadInitialPlaceholder=Boolean(t.getAttribute("placeholder"))}var s;return(s=[{key:"_init",value:function(){var t=this;if(this.options.nationalMode&&(this.options.autoHideDialCode=!1),this.options.separateDialCode&&(this.options.autoHideDialCode=this.options.nationalMode=!1),this.isMobile=/Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.isMobile&&(document.body.classList.add("iti-mobile"),this.options.dropdownContainer||(this.options.dropdownContainer=document.body)),"undefined"!=typeof Promise){var e=new Promise((function(e,i){t.resolveAutoCountryPromise=e,t.rejectAutoCountryPromise=i})),i=new Promise((function(e,i){t.resolveUtilsScriptPromise=e,t.rejectUtilsScriptPromise=i}));this.promise=Promise.all([e,i])}else this.resolveAutoCountryPromise=this.rejectAutoCountryPromise=function(){},this.resolveUtilsScriptPromise=this.rejectUtilsScriptPromise=function(){};this.selectedCountryData={},this._processCountryData(),this._generateMarkup(),this._setInitialState(),this._initListeners(),this._initRequests()}},{key:"_processCountryData",value:function(){this._processAllCountries(),this._processCountryCodes(),this._processPreferredCountries(),this.options.localizedCountries&&this._translateCountriesByLocale(),(this.options.onlyCountries.length||this.options.localizedCountries)&&this.countries.sort(this._countryNameSort)}},{key:"_addCountryCode",value:function(e,i,s){i.length>this.countryCodeMaxLen&&(this.countryCodeMaxLen=i.length),this.countryCodes.hasOwnProperty(i)||(this.countryCodes[i]=[]);for(var a=0;a<this.countryCodes[i].length;a++)if(this.countryCodes[i][a]===e)return;this.countryCodes[i][s!==t?s:this.countryCodes[i].length]=e}},{key:"_processAllCountries",value:function(){if(this.options.onlyCountries.length){var t=this.options.onlyCountries.map((function(t){return t.toLowerCase()}));this.countries=e.filter((function(e){return t.indexOf(e.iso2)>-1}))}else if(this.options.excludeCountries.length){var i=this.options.excludeCountries.map((function(t){return t.toLowerCase()}));this.countries=e.filter((function(t){return-1===i.indexOf(t.iso2)}))}else this.countries=e}},{key:"_translateCountriesByLocale",value:function(){for(var t=0;t<this.countries.length;t++){var e=this.countries[t].iso2.toLowerCase();this.options.localizedCountries.hasOwnProperty(e)&&(this.countries[t].name=this.options.localizedCountries[e])}}},{key:"_countryNameSort",value:function(t,e){return t.name.localeCompare(e.name)}},{key:"_processCountryCodes",value:function(){this.countryCodeMaxLen=0,this.dialCodes={},this.countryCodes={};for(var t=0;t<this.countries.length;t++){var e=this.countries[t];this.dialCodes[e.dialCode]||(this.dialCodes[e.dialCode]=!0),this._addCountryCode(e.iso2,e.dialCode,e.priority)}for(var i=0;i<this.countries.length;i++){var s=this.countries[i];if(s.areaCodes)for(var a=this.countryCodes[s.dialCode][0],n=0;n<s.areaCodes.length;n++){for(var o=s.areaCodes[n],l=1;l<o.length;l++){var r=s.dialCode+o.substr(0,l);this._addCountryCode(a,r),this._addCountryCode(s.iso2,r)}this._addCountryCode(s.iso2,s.dialCode+o)}}}},{key:"_processPreferredCountries",value:function(){this.preferredCountries=[];for(var t=0;t<this.options.preferredCountries.length;t++){var e=this.options.preferredCountries[t].toLowerCase(),i=this._getCountryData(e,!1,!0);i&&this.preferredCountries.push(i)}}},{key:"_createEl",value:function(t,e,i){var s=document.createElement(t);return e&&r(e,(function(t,e){return s.setAttribute(t,e)})),i&&i.appendChild(s),s}},{key:"_generateMarkup",value:function(){this.telInput.hasAttribute("autocomplete")||this.telInput.form&&this.telInput.form.hasAttribute("autocomplete")||this.telInput.setAttribute("autocomplete","off");var t="iti";this.options.allowDropdown&&(t+=" iti--allow-dropdown"),this.options.separateDialCode&&(t+=" iti--separate-dial-code"),this.options.customContainer&&(t+=" ",t+=this.options.customContainer);var e=this._createEl("div",{class:t});if(this.telInput.parentNode.insertBefore(e,this.telInput),this.flagsContainer=this._createEl("div",{class:"iti__flag-container"},e),e.appendChild(this.telInput),this.selectedFlag=this._createEl("div",{class:"iti__selected-flag",role:"combobox","aria-controls":"iti-".concat(this.id,"__country-listbox"),"aria-owns":"iti-".concat(this.id,"__country-listbox"),"aria-expanded":"false"},this.flagsContainer),this.selectedFlagInner=this._createEl("div",{class:"iti__flag"},this.selectedFlag),this.options.separateDialCode&&(this.selectedDialCode=this._createEl("div",{class:"iti__selected-dial-code"},this.selectedFlag)),this.options.allowDropdown&&(this.selectedFlag.setAttribute("tabindex","0"),this.dropdownArrow=this._createEl("div",{class:"iti__arrow"},this.selectedFlag),this.countryList=this._createEl("ul",{class:"iti__country-list iti__hide",id:"iti-".concat(this.id,"__country-listbox"),role:"listbox","aria-label":"List of countries"}),this.preferredCountries.length&&(this._appendListItems(this.preferredCountries,"iti__preferred",!0),this._createEl("li",{class:"iti__divider",role:"separator","aria-disabled":"true"},this.countryList)),this._appendListItems(this.countries,"iti__standard"),this.options.dropdownContainer?(this.dropdown=this._createEl("div",{class:"iti iti--container"}),this.dropdown.appendChild(this.countryList)):this.flagsContainer.appendChild(this.countryList)),this.options.hiddenInput){var i=this.options.hiddenInput,s=this.telInput.getAttribute("name");if(s){var a=s.lastIndexOf("[");-1!==a&&(i="".concat(s.substr(0,a),"[").concat(i,"]"))}this.hiddenInput=this._createEl("input",{type:"hidden",name:i}),e.appendChild(this.hiddenInput)}}},{key:"_appendListItems",value:function(t,e,i){for(var s="",a=0;a<t.length;a++){var n=t[a],o=i?"-preferred":"";s+="<li class='iti__country ".concat(e,"' tabIndex='-1' id='iti-").concat(this.id,"__item-").concat(n.iso2).concat(o,"' role='option' data-dial-code='").concat(n.dialCode,"' data-country-code='").concat(n.iso2,"' aria-selected='false'>"),s+="<div class='iti__flag-box'><div class='iti__flag iti__".concat(n.iso2,"'></div></div>"),s+="<span class='iti__country-name'>".concat(n.name,"</span>"),s+="<span class='iti__dial-code'>+".concat(n.dialCode,"</span>"),s+="</li>"}this.countryList.insertAdjacentHTML("beforeend",s)}},{key:"_setInitialState",value:function(){var t=this.telInput.getAttribute("value"),e=this.telInput.value,i=!t||"+"!==t.charAt(0)||e&&"+"===e.charAt(0)?e:t,s=this._getDialCode(i),a=this._isRegionlessNanp(i),n=this.options,o=n.initialCountry,l=n.nationalMode,r=n.autoHideDialCode,h=n.separateDialCode;s&&!a?this._updateFlagFromNumber(i):"auto"!==o&&(o?this._setFlag(o.toLowerCase()):s&&a?this._setFlag("us"):(this.defaultCountry=this.preferredCountries.length?this.preferredCountries[0].iso2:this.countries[0].iso2,i||this._setFlag(this.defaultCountry)),i||l||r||h||(this.telInput.value="+".concat(this.selectedCountryData.dialCode))),i&&this._updateValFromNumber(i)}},{key:"_initListeners",value:function(){this._initKeyListeners(),this.options.autoHideDialCode&&this._initBlurListeners(),this.options.allowDropdown&&this._initDropdownListeners(),this.hiddenInput&&this._initHiddenInputListener()}},{key:"_initHiddenInputListener",value:function(){var t=this;this._handleHiddenInputSubmit=function(){t.hiddenInput.value=t.getNumber()},this.telInput.form&&this.telInput.form.addEventListener("submit",this._handleHiddenInputSubmit)}},{key:"_getClosestLabel",value:function(){for(var t=this.telInput;t&&"LABEL"!==t.tagName;)t=t.parentNode;return t}},{key:"_initDropdownListeners",value:function(){var t=this;this._handleLabelClick=function(e){t.countryList.classList.contains("iti__hide")?t.telInput.focus():e.preventDefault()};var e=this._getClosestLabel();e&&e.addEventListener("click",this._handleLabelClick),this._handleClickSelectedFlag=function(){!t.countryList.classList.contains("iti__hide")||t.telInput.disabled||t.telInput.readOnly||t._showDropdown()},this.selectedFlag.addEventListener("click",this._handleClickSelectedFlag),this._handleFlagsContainerKeydown=function(e){t.countryList.classList.contains("iti__hide")&&-1!==["ArrowUp","Up","ArrowDown","Down"," ","Enter"].indexOf(e.key)&&(e.preventDefault(),e.stopPropagation(),t._showDropdown()),"Tab"===e.key&&t._closeDropdown()},this.flagsContainer.addEventListener("keydown",this._handleFlagsContainerKeydown)}},{key:"_initRequests",value:function(){var t=this;this.options.utilsScript&&!window.intlTelInputUtils?window.intlTelInputGlobals.documentReady()?window.intlTelInputGlobals.loadUtils(this.options.utilsScript):window.addEventListener("load",(function(){window.intlTelInputGlobals.loadUtils(t.options.utilsScript)})):this.resolveUtilsScriptPromise(),"auto"===this.options.initialCountry?this._loadAutoCountry():this.resolveAutoCountryPromise()}},{key:"_loadAutoCountry",value:function(){window.intlTelInputGlobals.autoCountry?this.handleAutoCountry():window.intlTelInputGlobals.startedLoadingAutoCountry||(window.intlTelInputGlobals.startedLoadingAutoCountry=!0,"function"==typeof this.options.geoIpLookup&&this.options.geoIpLookup((function(t){window.intlTelInputGlobals.autoCountry=t.toLowerCase(),setTimeout((function(){return h("handleAutoCountry")}))}),(function(){return h("rejectAutoCountryPromise")})))}},{key:"_initKeyListeners",value:function(){var t=this;this._handleKeyupEvent=function(){t._updateFlagFromNumber(t.telInput.value)&&t._triggerCountryChange()},this.telInput.addEventListener("keyup",this._handleKeyupEvent),this._handleClipboardEvent=function(){setTimeout(t._handleKeyupEvent)},this.telInput.addEventListener("cut",this._handleClipboardEvent),this.telInput.addEventListener("paste",this._handleClipboardEvent)}},{key:"_cap",value:function(t){var e=this.telInput.getAttribute("maxlength");return e&&t.length>e?t.substr(0,e):t}},{key:"_initBlurListeners",value:function(){var t=this;this._handleSubmitOrBlurEvent=function(){t._removeEmptyDialCode()},this.telInput.form&&this.telInput.form.addEventListener("submit",this._handleSubmitOrBlurEvent),this.telInput.addEventListener("blur",this._handleSubmitOrBlurEvent)}},{key:"_removeEmptyDialCode",value:function(){if("+"===this.telInput.value.charAt(0)){var t=this._getNumeric(this.telInput.value);t&&this.selectedCountryData.dialCode!==t||(this.telInput.value="")}}},{key:"_getNumeric",value:function(t){return t.replace(/\D/g,"")}},{key:"_trigger",value:function(t){var e=document.createEvent("Event");e.initEvent(t,!0,!0),this.telInput.dispatchEvent(e)}},{key:"_showDropdown",value:function(){this.countryList.classList.remove("iti__hide"),this.selectedFlag.setAttribute("aria-expanded","true"),this._setDropdownPosition(),this.activeItem&&(this._highlightListItem(this.activeItem,!1),this._scrollTo(this.activeItem,!0)),this._bindDropdownListeners(),this.dropdownArrow.classList.add("iti__arrow--up"),this._trigger("open:countrydropdown")}},{key:"_toggleClass",value:function(t,e,i){i&&!t.classList.contains(e)?t.classList.add(e):!i&&t.classList.contains(e)&&t.classList.remove(e)}},{key:"_setDropdownPosition",value:function(){var t=this;if(this.options.dropdownContainer&&this.options.dropdownContainer.appendChild(this.dropdown),!this.isMobile){var e=this.telInput.getBoundingClientRect(),i=window.pageYOffset||document.documentElement.scrollTop,s=e.top+i,a=this.countryList.offsetHeight,n=s+this.telInput.offsetHeight+a<i+window.innerHeight,o=s-a>i;this._toggleClass(this.countryList,"iti__country-list--dropup",!n&&o),this.options.dropdownContainer&&(this.dropdown.style.top="".concat(s+(!n&&o?0:this.telInput.offsetHeight),"px"),this.dropdown.style.left="".concat(e.left+document.body.scrollLeft,"px"),this._handleWindowScroll=function(){return t._closeDropdown()},window.addEventListener("scroll",this._handleWindowScroll))}}},{key:"_getClosestListItem",value:function(t){for(var e=t;e&&e!==this.countryList&&!e.classList.contains("iti__country");)e=e.parentNode;return e===this.countryList?null:e}},{key:"_bindDropdownListeners",value:function(){var t=this;this._handleMouseoverCountryList=function(e){var i=t._getClosestListItem(e.target);i&&t._highlightListItem(i,!1)},this.countryList.addEventListener("mouseover",this._handleMouseoverCountryList),this._handleClickCountryList=function(e){var i=t._getClosestListItem(e.target);i&&t._selectListItem(i)},this.countryList.addEventListener("click",this._handleClickCountryList);var e=!0;this._handleClickOffToClose=function(){e||t._closeDropdown(),e=!1},document.documentElement.addEventListener("click",this._handleClickOffToClose);var i="",s=null;this._handleKeydownOnDropdown=function(e){e.preventDefault(),"ArrowUp"===e.key||"Up"===e.key||"ArrowDown"===e.key||"Down"===e.key?t._handleUpDownKey(e.key):"Enter"===e.key?t._handleEnterKey():"Escape"===e.key?t._closeDropdown():/^[a-zA-ZÀ-ÿа-яА-Я ]$/.test(e.key)&&(s&&clearTimeout(s),i+=e.key.toLowerCase(),t._searchForCountry(i),s=setTimeout((function(){i=""}),1e3))},document.addEventListener("keydown",this._handleKeydownOnDropdown)}},{key:"_handleUpDownKey",value:function(t){var e="ArrowUp"===t||"Up"===t?this.highlightedItem.previousElementSibling:this.highlightedItem.nextElementSibling;e&&(e.classList.contains("iti__divider")&&(e="ArrowUp"===t||"Up"===t?e.previousElementSibling:e.nextElementSibling),this._highlightListItem(e,!0))}},{key:"_handleEnterKey",value:function(){this.highlightedItem&&this._selectListItem(this.highlightedItem)}},{key:"_searchForCountry",value:function(t){for(var e=0;e<this.countries.length;e++)if(this._startsWith(this.countries[e].name,t)){var i=this.countryList.querySelector("#iti-".concat(this.id,"__item-").concat(this.countries[e].iso2));this._highlightListItem(i,!1),this._scrollTo(i,!0);break}}},{key:"_startsWith",value:function(t,e){return t.substr(0,e.length).toLowerCase()===e}},{key:"_updateValFromNumber",value:function(t){var e=t;if(this.options.formatOnDisplay&&window.intlTelInputUtils&&this.selectedCountryData){var i=!this.options.separateDialCode&&(this.options.nationalMode||"+"!==e.charAt(0)),s=intlTelInputUtils.numberFormat;e=intlTelInputUtils.formatNumber(e,this.selectedCountryData.iso2,i?s.NATIONAL:s.INTERNATIONAL)}e=this._beforeSetNumber(e),this.telInput.value=e}},{key:"_updateFlagFromNumber",value:function(t){var e=t,i=this.selectedCountryData.dialCode;e&&this.options.nationalMode&&"1"===i&&"+"!==e.charAt(0)&&("1"!==e.charAt(0)&&(e="1".concat(e)),e="+".concat(e)),this.options.separateDialCode&&i&&"+"!==e.charAt(0)&&(e="+".concat(i).concat(e));var s=this._getDialCode(e,!0),a=this._getNumeric(e),n=null;if(s){var o=this.countryCodes[this._getNumeric(s)],l=-1!==o.indexOf(this.selectedCountryData.iso2)&&a.length<=s.length-1;if(!("1"===i&&this._isRegionlessNanp(a)||l))for(var r=0;r<o.length;r++)if(o[r]){n=o[r];break}}else"+"===e.charAt(0)&&a.length?n="":e&&"+"!==e||(n=this.defaultCountry);return null!==n&&this._setFlag(n)}},{key:"_isRegionlessNanp",value:function(t){var e=this._getNumeric(t);if("1"===e.charAt(0)){var i=e.substr(1,3);return-1!==l.indexOf(i)}return!1}},{key:"_highlightListItem",value:function(t,e){var i=this.highlightedItem;i&&i.classList.remove("iti__highlight"),this.highlightedItem=t,this.highlightedItem.classList.add("iti__highlight"),e&&this.highlightedItem.focus()}},{key:"_getCountryData",value:function(t,i,s){for(var a=i?e:this.countries,n=0;n<a.length;n++)if(a[n].iso2===t)return a[n];if(s)return null;throw new Error("No country data for '".concat(t,"'"))}},{key:"_setFlag",value:function(t){var e=this.selectedCountryData.iso2?this.selectedCountryData:{};this.selectedCountryData=t?this._getCountryData(t,!1,!1):{},this.selectedCountryData.iso2&&(this.defaultCountry=this.selectedCountryData.iso2),this.selectedFlagInner.setAttribute("class","iti__flag iti__".concat(t));var i=t?"".concat(this.selectedCountryData.name,": +").concat(this.selectedCountryData.dialCode):"Unknown";if(this.selectedFlag.setAttribute("title",i),this.options.separateDialCode){var s=this.selectedCountryData.dialCode?"+".concat(this.selectedCountryData.dialCode):"";this.selectedDialCode.innerHTML=s;var a=this.selectedFlag.offsetWidth||this._getHiddenSelectedFlagWidth();this.telInput.style.paddingLeft="".concat(a+6,"px")}if(this._updatePlaceholder(),this.options.allowDropdown){var n=this.activeItem;if(n&&(n.classList.remove("iti__active"),n.setAttribute("aria-selected","false")),t){var o=this.countryList.querySelector("#iti-".concat(this.id,"__item-").concat(t,"-preferred"))||this.countryList.querySelector("#iti-".concat(this.id,"__item-").concat(t));o.setAttribute("aria-selected","true"),o.classList.add("iti__active"),this.activeItem=o,this.selectedFlag.setAttribute("aria-activedescendant",o.getAttribute("id"))}}return e.iso2!==t}},{key:"_getHiddenSelectedFlagWidth",value:function(){var t=this.telInput.parentNode.cloneNode();t.style.visibility="hidden",document.body.appendChild(t);var e=this.flagsContainer.cloneNode();t.appendChild(e);var i=this.selectedFlag.cloneNode(!0);e.appendChild(i);var s=i.offsetWidth;return t.parentNode.removeChild(t),s}},{key:"_updatePlaceholder",value:function(){if(window.intlTelInputUtils&&("aggressive"===this.options.autoPlaceholder||!this.hadInitialPlaceholder&&"polite"===this.options.autoPlaceholder)){var t=intlTelInputUtils.numberType[this.options.placeholderNumberType],e=this.selectedCountryData.iso2?intlTelInputUtils.getExampleNumber(this.selectedCountryData.iso2,this.options.nationalMode,t):"";e=this._beforeSetNumber(e),"function"==typeof this.options.customPlaceholder&&(e=this.options.customPlaceholder(e,this.selectedCountryData)),this.telInput.setAttribute("placeholder",e)}}},{key:"_selectListItem",value:function(t){var e=this._setFlag(t.getAttribute("data-country-code"));this._closeDropdown(),this._updateDialCode(t.getAttribute("data-dial-code"),!0),this.telInput.focus();var i=this.telInput.value.length;this.telInput.setSelectionRange(i,i),e&&this._triggerCountryChange()}},{key:"_closeDropdown",value:function(){this.countryList.classList.add("iti__hide"),this.selectedFlag.setAttribute("aria-expanded","false"),this.dropdownArrow.classList.remove("iti__arrow--up"),document.removeEventListener("keydown",this._handleKeydownOnDropdown),document.documentElement.removeEventListener("click",this._handleClickOffToClose),this.countryList.removeEventListener("mouseover",this._handleMouseoverCountryList),this.countryList.removeEventListener("click",this._handleClickCountryList),this.options.dropdownContainer&&(this.isMobile||window.removeEventListener("scroll",this._handleWindowScroll),this.dropdown.parentNode&&this.dropdown.parentNode.removeChild(this.dropdown)),this._trigger("close:countrydropdown")}},{key:"_scrollTo",value:function(t,e){var i=this.countryList,s=window.pageYOffset||document.documentElement.scrollTop,a=i.offsetHeight,n=i.getBoundingClientRect().top+s,o=n+a,l=t.offsetHeight,r=t.getBoundingClientRect().top+s,h=r+l,d=r-n+i.scrollTop,u=a/2-l/2;r<n?(e&&(d-=u),i.scrollTop=d):h>o&&(e&&(d+=u),i.scrollTop=d-(a-l))}},{key:"_updateDialCode",value:function(t,e){var i,s=this.telInput.value,a="+".concat(t);if("+"===s.charAt(0)){var n=this._getDialCode(s);i=n?s.replace(n,a):a}else{if(this.options.nationalMode||this.options.separateDialCode)return;if(s)i=a+s;else{if(!e&&this.options.autoHideDialCode)return;i=a}}this.telInput.value=i}},{key:"_getDialCode",value:function(t,e){var i="";if("+"===t.charAt(0))for(var s="",a=0;a<t.length;a++){var n=t.charAt(a);if(!isNaN(parseInt(n,10))){if(s+=n,e)this.countryCodes[s]&&(i=t.substr(0,a+1));else if(this.dialCodes[s]){i=t.substr(0,a+1);break}if(s.length===this.countryCodeMaxLen)break}}return i}},{key:"_getFullNumber",value:function(){var t=this.telInput.value.trim(),e=this.selectedCountryData.dialCode,i=this._getNumeric(t);return(this.options.separateDialCode&&"+"!==t.charAt(0)&&e&&i?"+".concat(e):"")+t}},{key:"_beforeSetNumber",value:function(t){var e=t;if(this.options.separateDialCode){var i=this._getDialCode(e);i&&(i="+".concat(this.selectedCountryData.dialCode),e=e.substr(" "===e[i.length]||"-"===e[i.length]?i.length+1:i.length))}return this._cap(e)}},{key:"_triggerCountryChange",value:function(){this._trigger("countrychange")}},{key:"handleAutoCountry",value:function(){"auto"===this.options.initialCountry&&(this.defaultCountry=window.intlTelInputGlobals.autoCountry,this.telInput.value||this.setCountry(this.defaultCountry),this.resolveAutoCountryPromise())}},{key:"handleUtils",value:function(){window.intlTelInputUtils&&(this.telInput.value&&this._updateValFromNumber(this.telInput.value),this._updatePlaceholder()),this.resolveUtilsScriptPromise()}},{key:"destroy",value:function(){var t=this.telInput.form;if(this.options.allowDropdown){this._closeDropdown(),this.selectedFlag.removeEventListener("click",this._handleClickSelectedFlag),this.flagsContainer.removeEventListener("keydown",this._handleFlagsContainerKeydown);var e=this._getClosestLabel();e&&e.removeEventListener("click",this._handleLabelClick)}this.hiddenInput&&t&&t.removeEventListener("submit",this._handleHiddenInputSubmit),this.options.autoHideDialCode&&(t&&t.removeEventListener("submit",this._handleSubmitOrBlurEvent),this.telInput.removeEventListener("blur",this._handleSubmitOrBlurEvent)),this.telInput.removeEventListener("keyup",this._handleKeyupEvent),this.telInput.removeEventListener("cut",this._handleClipboardEvent),this.telInput.removeEventListener("paste",this._handleClipboardEvent),this.telInput.removeAttribute("data-intl-tel-input-id");var i=this.telInput.parentNode;i.parentNode.insertBefore(this.telInput,i),i.parentNode.removeChild(i),delete window.intlTelInputGlobals.instances[this.id]}},{key:"getExtension",value:function(){return window.intlTelInputUtils?intlTelInputUtils.getExtension(this._getFullNumber(),this.selectedCountryData.iso2):""}},{key:"getNumber",value:function(t){if(window.intlTelInputUtils){var e=this.selectedCountryData.iso2;return intlTelInputUtils.formatNumber(this._getFullNumber(),e,t)}return""}},{key:"getNumberType",value:function(){return window.intlTelInputUtils?intlTelInputUtils.getNumberType(this._getFullNumber(),this.selectedCountryData.iso2):-99}},{key:"getSelectedCountryData",value:function(){return this.selectedCountryData}},{key:"getValidationError",value:function(){if(window.intlTelInputUtils){var t=this.selectedCountryData.iso2;return intlTelInputUtils.getValidationError(this._getFullNumber(),t)}return-99}},{key:"isValidNumber",value:function(){var t=this._getFullNumber().trim();return window.intlTelInputUtils?intlTelInputUtils.isValidNumber(t,this.options.nationalMode?this.selectedCountryData.iso2:""):null}},{key:"setCountry",value:function(t){var e=t.toLowerCase();this.selectedFlagInner.classList.contains("iti__".concat(e))||(this._setFlag(e),this._updateDialCode(this.selectedCountryData.dialCode,!1),this._triggerCountryChange())}},{key:"setNumber",value:function(t){var e=this._updateFlagFromNumber(t);this._updateValFromNumber(t),e&&this._triggerCountryChange()}},{key:"setPlaceholderNumberType",value:function(t){this.options.placeholderNumberType=t,this._updatePlaceholder()}}])&&function(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}(i.prototype,s),i}();a.getCountryData=function(){return e};var u=function(t,e,i){var s=document.createElement("script");s.onload=function(){h("handleUtils"),e&&e()},s.onerror=function(){h("rejectUtilsScriptPromise"),i&&i()},s.className="iti-load-utils",s.async=!0,s.src=t,document.body.appendChild(s)};return a.loadUtils=function(t){if(!window.intlTelInputUtils&&!window.intlTelInputGlobals.startedLoadingUtilsScript){if(window.intlTelInputGlobals.startedLoadingUtilsScript=!0,"undefined"!=typeof Promise)return new Promise((function(e,i){return u(t,e,i)}));u(t)}return null},a.defaults=o,a.version="17.0.15",function(t,e){var i=new d(t,e);return i._init(),t.setAttribute("data-intl-tel-input-id",i.id),window.intlTelInputGlobals.instances[i.id]=i,i}}()},(u=d={path:void 0,exports:{},require:function(){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}}).exports?u.exports=c():window.intlTelInput=c(),d.exports);const m=class{constructor(t){(0,s.r)(this,t),this.enterClicked=(0,s.c)(this,"enterClicked",7),this.countryCode=salla.config.get("user.country_code","SA"),this.countryKey="+966",this.countryCodeLabel=salla.lang.get("common.country_code"),this.mobileLabel=salla.lang.get("common.elements.mobile"),this.tooShort=salla.lang.get("common.errors.too_short",{attribute:this.mobileLabel}),this.tooLong=salla.lang.get("common.errors.too_long",{attribute:this.mobileLabel}),this.invalidCountryCode=salla.lang.get("common.errors.invalid_value",{attribute:this.countryCodeLabel}),this.invalidNumber=salla.lang.get("common.errors.invalid_value",{attribute:this.mobileLabel}),this.errorMap=[this.invalidNumber,this.invalidCountryCode,this.tooShort,this.tooLong,this.invalidNumber],a.H.setHost(this.host),salla.event.on("languages::translations.loaded",(()=>{this.mobileLabel=salla.lang.get("common.elements.mobile"),this.countryCodeLabel=salla.lang.get("common.country_code"),this.invalidNumber=salla.lang.get("common.errors.invalid_value",{attribute:this.mobileLabel}),this.invalidCountryCode=salla.lang.get("common.errors.invalid_value",{attribute:this.countryCodeLabel}),this.tooShort=salla.lang.get("common.errors.too_short",{attribute:this.mobileLabel}),this.tooLong=salla.lang.get("common.errors.too_long",{attribute:this.mobileLabel}),this.mobileRequired=salla.lang.get("common.errors.field_required",{attribute:this.mobileLabel}),this.errorMap=[this.invalidNumber,this.invalidCountryCode,this.tooShort,this.tooLong,this.invalidNumber]}))}async getValues(){return{mobile:this.mobile=this.phoneInput.value,countryCode:this.countryCode=this.countryCodeInput.value,countryKey:this.countryKey=this.countryKeyInput.value}}async isValid(){if(this.reset(),this.iti.isValidNumber())return!0;if(!this.phoneInput.value.trim())return this.phoneInput.classList.add("s-has-error"),void(this.errorMsg.innerText=this.mobileRequired||"");this.phoneInput.classList.add("s-has-error");let t=this.iti.getValidationError();return this.errorMsg.innerText=this.errorMap[t]||"",!1}initTelInput(){salla.helpers.digitsOnly(this.phoneInput),this.iti=g(this.phoneInput,{initialCountry:this.countryCode||"sa",preferredCountries:["sa","ae","kw","bh","qa","iq","om","ye","eg","jo","sy","ps","sd","lb","dz","tn","ma","ly"],formatOnDisplay:!1,separateDialCode:!0,autoPlaceholder:"aggressive",utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.12/js/utils.min.js"}),this.phoneInput.addEventListener("countrychange",(()=>{let t=this.iti.getSelectedCountryData();this.host.querySelectorAll(".country_code").forEach((e=>e.value=t.iso2.toUpperCase())),this.host.querySelectorAll(".country_key").forEach((e=>{e.value=("+"+t.dialCode).replace("++","+")}))})),this.phoneInput.addEventListener("blur",(()=>this.isValid())),this.phoneInput.addEventListener("input",(t=>{salla.helpers.digitsOnly(t.target),this.reset()}))}reset(){this.phoneInput.classList.remove("s-has-error"),this.errorMsg.innerHTML=""}render(){return(0,s.h)(s.H,null,(0,s.h)("input",{type:"tel",name:"mobile",value:this.mobile,ref:t=>this.phoneInput=t,class:"s-tel-input-control  tel-input s-ltr"}),(0,s.h)("span",{class:"s-tel-input-error-msg",ref:t=>this.errorMsg=t}),(0,s.h)("input",{type:"hidden",name:"country_code",value:this.countryCode,ref:t=>this.countryCodeInput=t,class:"country_code"}),(0,s.h)("input",{type:"hidden",name:"country_key",value:this.countryKey,ref:t=>this.countryKeyInput=t,class:"country_key"}))}componentDidLoad(){this.initTelInput()}get host(){return(0,s.g)(this)}},p=class{constructor(t){(0,s.r)(this,t),this.verified=(0,s.c)(this,"verified",7),this.initiated=!1,this.by="sms",this.autoReload=!0,a.H.setHost(this.host),this.withoutModal?this.modal={show:()=>"",hide:()=>""}:salla.event.on("profile::verify.mobile",(t=>{this.url="profile/verify-mobile",this.show(t)})),salla.event.on("languages::translations.loaded",(()=>{var t;this.title=salla.lang.get("pages.profile.verify_title"),null===(t=this.btn)||void 0===t||t.setText(salla.lang.get("pages.profile.verify"))}))}async getCode(){return this.code.value}async show(t){var e;this.data=t,this.resendTimer(),this.otpInputs=this.host.querySelectorAll(".s-verify-input"),this.initiated||(a.H.on("input",".s-verify-input",(t=>salla.helpers.digitsOnly(t.target))),a.H.onKeyUp(".s-verify-input",(t=>{var e,i,s,a;let n=t.keyCode||t.charCode;t.target.value?(null===(e=t.target.nextElementSibling)||void 0===e||e.focus(),null===(i=t.target.nextElementSibling)||void 0===i||i.select()):[8,46].includes(n)&&(null===(s=t.target.previousElementSibling)||void 0===s||s.focus(),null===(a=t.target.previousElementSibling)||void 0===a||a.select()),this.toggleOTPSubmit()})),a.H.on("paste",".s-verify-input",(t=>{let e=t.clipboardData.getData("text").toArabicDigits().replace(/[^0-9.]/g,"").replace("..",".");this.otpInputs.forEach(((t,i)=>t.value=e[i]||"")),this.toggleOTPSubmit(),setTimeout((()=>this.otpInputs[3].focus()),100)})),this.initiated=!0),this.reset(),!this.withoutModal&&(null===(e=this.modal)||void 0===e||e.setTitle(this.title)),this.modal.show()}toggleOTPSubmit(){let t=[];if(this.otpInputs.forEach((e=>e.value&&t.push(e.value))),this.code.value=t.join(""),4===t.length)return this.btn.removeAttribute("disabled"),void this.btn.click();this.btn.setAttribute("disabled","")}reset(){this.otpInputs.forEach((t=>t.value="")),this.code.value="",this.otpInputs[0].focus()}resendTimer(){a.H.showElement(this.resendMessage).hideElement(this.resend);let t=30,e=setInterval((()=>{-1===t?(clearTimeout(e),a.H.hideElement(this.resendMessage).showElement(this.resend)):(this.timer.innerHTML=`${t>=10?t:"0"+t} : 00`,t--)}),1e3)}resendCode(){return this.btn.stop().then((()=>this.btn.disable())).then((()=>{this.otpInputs.forEach((t=>t.value="")),this.otpInputs[0].focus()})).then((()=>salla.api.auth.resend(Object.assign({resend_by:this.by},this.data)))).then((()=>this.resendTimer())).catch((()=>this.resendTimer()))}submit(){let t=Object.assign({code:this.code.value},this.data);return this.btn.load().then((()=>this.btn.disable())).then((()=>this.url?salla.api.auth.request(this.url,t):salla.api.auth.verify("sms"==this.by?"mobile":this.by,t))).then((t=>this.verified.emit(t))).then((()=>this.btn.stop()&&this.btn.disable())).then((()=>this.modal.hide())).then((()=>this.autoReload&&window.location.reload())).catch((()=>this.btn.stop()&&this.btn.enable()&&this.reset()))}render(){return this.withoutModal?this.myBody():(0,s.h)("salla-modal",{icon:"sicon-android-phone",width:"xs",id:"s-verify",ref:t=>this.modal=t,title:this.title},this.myBody())}myBody(){return[(0,s.h)("div",{class:"s-verify-message",innerHTML:salla.lang.get("pages.profile.verify_message")}),(0,s.h)("input",{type:"hidden",name:"code",maxlength:"4",required:!0,ref:t=>this.code=t}),(0,s.h)("div",{class:"s-verify-codes",dir:"ltr"},[1,2,3,4].map((()=>(0,s.h)("input",{type:"text",maxlength:"1",class:"s-verify-input",required:!0})))),(0,s.h)("div",{slot:"footer",class:"s-verify-footer"},(0,s.h)("salla-button",{class:"s-verify-submit","loader-position":"center",disabled:!0,onClick:()=>this.submit(),ref:t=>this.btn=t},salla.lang.get("pages.profile.verify")),(0,s.h)("p",{class:"s-verify-resend-message",ref:t=>this.resendMessage=t},salla.lang.get("blocks.header.resend_after"),(0,s.h)("b",{class:"s-verify-timer",ref:t=>this.timer=t})),(0,s.h)("a",{href:"#",class:"s-verify-resend",onClick:()=>this.resendCode(),ref:t=>this.resend=t},salla.lang.get("blocks.comments.submit"))),(0,s.h)("slot",{name:"after-footer"})]}get host(){return(0,s.g)(this)}}},863:(t,e,i)=>{i.d(e,{H:()=>a}),salla.event.setMaxListeners(20);class s extends salla.AppHelpers{setHost(t){this.host=t}getElement(t){return this.host.querySelector(t)}getAttribute(t,e){var i;return null===(i=this.getElement(t))||void 0===i?void 0:i.getAttribute(e)}val(t){return this.getAttribute(t,"value")}isUser(){return"user"===salla.config.get("user.type")}}const a=new s}}]);