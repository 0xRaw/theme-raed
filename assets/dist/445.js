"use strict";(self.webpackChunkTheme_One=self.webpackChunkTheme_One||[]).push([[445],{445:(l,a,e)=>{e.r(a),e.d(a,{salla_localization:()=>n});var s=e(531),t=e(602);const n=class{constructor(l){(0,s.r)(this,l),t.H.setHost(this.host),salla.event.on("localization::show",(()=>this.show()))}async show(){return this.modal.show()}async hide(){return this.modal.hide()}submit(){let l;this.btn.load().then((()=>{let a=t.H.val("[name=currency]:checked");if(a!==salla.config.currency.code)return l=window.location.href,salla.currency.api.change(a)})).then((()=>{let a=t.H.val("[name=lang]:checked");a!==salla.config.language.code&&(l=salla.config.languages.filter((l=>l.code===a))[0].url)})).then((()=>this.btn.stop())).then((()=>this.hide())).then((()=>l&&(window.location.href=l)))}render(){return(0,s.h)("salla-modal",{id:"salla-localization",class:"hidden",ref:l=>this.modal=l},(0,s.h)("slot",{name:"header"},(0,s.h)("div",{slot:"header"})),(0,s.h)("div",{class:"s-localization-inner"},salla.config.languages?(0,s.h)("div",{class:"s-localization-section"},(0,s.h)("label",{class:"s-localization-title"},salla.lang.get("common.titles.language")),(0,s.h)("fieldset",{class:"s-localization-fieldset"},(0,s.h)("legend",{class:"sr-only"},salla.lang.get("blocks.header.change_language")),(0,s.h)("div",{class:"s-localization-section-inner"},salla.config.languages.map((l=>(0,s.h)("div",{class:"flex items-center"},(0,s.h)("input",{id:"lang-"+l.code.toLowerCase(),class:"s-localization-input",name:"lang",checked:salla.config.language.code==l.code,type:"radio",value:l.code}),(0,s.h)("label",{htmlFor:"lang-"+l.code.toLowerCase(),class:"s-localization-label"},(0,s.h)("span",null,l.name),(0,s.h)("div",{class:"s-localization-flag flag iti__flag iti__"+l.country_code})))))))):"",salla.config.currencies?(0,s.h)("div",{class:"s-localization-section"},(0,s.h)("label",{class:"s-localization-title"},salla.lang.get("common.titles.currency")),(0,s.h)("fieldset",{class:"s-localization-fieldset"},(0,s.h)("legend",{class:"sr-only"},salla.lang.get("blocks.header.change_currency")),(0,s.h)("div",{class:"s-localization-section-inner"},salla.config.currencies.map((l=>(0,s.h)("div",{class:"s-localization-item"},(0,s.h)("input",{class:"s-localization-input",checked:salla.config.currency.code==l.code,id:"currency-"+l.code,name:"currency",type:"radio",value:l.code}),(0,s.h)("label",{class:"s-localization-label",htmlFor:"currency-"+l.code},(0,s.h)("span",null,l.name),(0,s.h)("small",{class:"s-localization-currency"},l.code)))))))):""),(0,s.h)("p",{slot:"footer"},(0,s.h)("slot",{name:"footer"},(0,s.h)("salla-button",{ref:l=>this.btn=l,onClick:()=>this.submit(),class:"w-full"},salla.lang.get("common.elements.ok")))))}get host(){return(0,s.g)(this)}}},602:(l,a,e)=>{e.d(a,{H:()=>t});class s extends salla.AppHelpers{setHost(l){this.host=l}getElement(l){return this.host.querySelector(l)}getAttribute(l,a){var e;return null===(e=this.getElement(l))||void 0===e?void 0:e.getAttribute(a)}val(l){return this.getAttribute(l,"value")}}const t=new s}}]);